<!DOCTYPE html>
<html lang="fr"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="index_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="index_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Sandrine LYSER">
  <title>Bulle d’R. Manipulation de données dans l’univers du tidyverse</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #383a42;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #383a42; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #50a14f; } /* Annotation */
    code span.at { color: #a626a4; } /* Attribute */
    code span.bn { color: #986801; } /* BaseN */
    code span.bu { color: #a626a4; } /* BuiltIn */
    code span.cf { color: #a626a4; } /* ControlFlow */
    code span.ch { color: #50a14f; } /* Char */
    code span.cn { color: #986801; } /* Constant */
    code span.co { color: #a0a1a7; font-style: italic; } /* Comment */
    code span.cv { color: #e45649; font-style: italic; } /* CommentVar */
    code span.do { color: #e45649; } /* Documentation */
    code span.dt { color: #a626a4; } /* DataType */
    code span.dv { color: #986801; } /* DecVal */
    code span.er { color: #f44747; text-decoration: underline; } /* Error */
    code span.ex { color: #4078f2; font-weight: bold; } /* Extension */
    code span.fl { color: #986801; } /* Float */
    code span.fu { color: #4078f2; } /* Function */
    code span.im { color: #50a14f; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #a626a4; } /* Keyword */
    code span.op { color: #a626a4; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #a626a4; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #0184bc; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #50a14f; } /* String */
    code span.va { color: #e45649; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-pointer/pointer.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="index_files/libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="index_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-footer="<a rel='license' href='https://creativecommons.org/licenses/by-sa/4.0/'><img alt='Creative Commons License' style='border-width:0; width:200px' src='https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png' /><br></a>Présentation diffusée sous <a rel='license' href='https://creativecommons.org/licenses/by-sa/4.0/'>licence CC BY-NC-SA 4.0</a>." class="quarto-title-block center">
  <h1 class="title">Bulle d’R. Manipulation de données dans l’univers du tidyverse</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Sandrine LYSER <a href="https://orcid.org/0000-0001-6820-0672" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
</div>
<div class="quarto-title-author-email">
<a href="mailto:sandrine.lyser@inrae.fr">sandrine.lyser@inrae.fr</a>
</div>
        <p class="quarto-title-affiliation">
            INRAE
          </p>
    </div>
</div>

  <p class="date">18 février 2025</p>
</section><section id="TOC">
	<nav id="toc-nav" role="doc-toc" "="">  
					<h2 id="toc-title">Table des matières</h2>
				<ul>
<li><a href="#/préambule.-jeu-de-données-utilisé-dans-cette-session" id="/toc-préambule.-jeu-de-données-utilisé-dans-cette-session">Préambule. Jeu de données utilisé dans cette session</a></li>
<li><a href="#/quelques-rappels" id="/toc-quelques-rappels">Quelques rappels</a>
<ul>
<li><a href="#/lunivers-du-tidyverse" id="/toc-lunivers-du-tidyverse">L’univers du <code>tidyverse</code></a></li>
<li><a href="#/la-commande-pipe" id="/toc-la-commande-pipe">La commande pipe</a></li>
<li><a href="#/les-packages-utiles-pour-la-manipulation-des-données" id="/toc-les-packages-utiles-pour-la-manipulation-des-données">Les packages utiles pour la manipulation des données</a></li>
<li><a href="#/quest-ce-quun-tibble" id="/toc-quest-ce-quun-tibble">Qu’est-ce-qu’un <code>{tibble}</code> ?</a></li>
</ul></li>
<li><a href="#/manipulations-des-données" id="/toc-manipulations-des-données">Manipulations des données</a>
<ul>
<li><a href="#/manipulations-avec-le-package-dplyr" id="/toc-manipulations-avec-le-package-dplyr">Manipulations avec le package <code>{dplyr}</code></a></li>
<li><a href="#/manipulations-avec-le-package-tidyr" id="/toc-manipulations-avec-le-package-tidyr">Manipulations avec le package <code>{tidyr}</code></a></li>
<li><a href="#/manipulations-des-chaînes-de-caractères-avec-le-package-stringr" id="/toc-manipulations-des-chaînes-de-caractères-avec-le-package-stringr">Manipulations des chaînes de caractères avec le package <code>{stringr}</code></a></li>
<li><a href="#/manipulation-des-facteurs-avec-le-package-forcats" id="/toc-manipulation-des-facteurs-avec-le-package-forcats">Manipulation des facteurs avec le package <code>{forcats}</code></a></li>
</ul></li>
<li><a href="#/ressources-et-références-bibliographiques" id="/toc-ressources-et-références-bibliographiques">Ressources et références bibliographiques</a>
<ul>
<li><a href="#/aides-et-ressources-en-ligne" id="/toc-aides-et-ressources-en-ligne">Aides et ressources en ligne</a></li>
<li><a href="#/packages" id="/toc-packages">Packages</a></li>
</ul></li>
</ul>
	</nav>
</section>
<section id="préambule.-jeu-de-données-utilisé-dans-cette-session" class="slide level2 unnumbered" data-background-color="#dfddec">
<h2>Préambule. Jeu de données utilisé dans cette session</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><strong><code>hdv2003</code></strong></p>
<ul>
<li>disponible dans le package <a href="https://juba.github.io/questionr/index.html" target="_blank"><code>{questionr}</code></a></li>
<li>échantillon tiré de l’enquête Histoire de vie, réalisée en 2003 en France, par l’Insee, auprès de la population âgée de 18 ans et plus</li>
<li>2000 lignes et 20 variables</li>
</ul>
</div><div class="column" style="width:65%;">
<p><strong>Dictionnaire des variables</strong></p>
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:550px; ">
<table class="lightable-paper lightable-hover caption-top" data-quarto-postprocess="true" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Variable</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Description</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">Identifiant unique de l'individu</td>
<td style="text-align: left;">entier</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: left;">Âge de l'individu</td>
<td style="text-align: left;">entier</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sexe</td>
<td style="text-align: left;">Sexe de l'individu</td>
<td style="text-align: left;">facteur (Femme, Homme)</td>
</tr>
<tr class="even">
<td style="text-align: left;">nivetud</td>
<td style="text-align: left;">Niveau d'études</td>
<td style="text-align: left;">facteur (8 modalités)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">poids</td>
<td style="text-align: left;">Poids de l'individu dans l'échantillon</td>
<td style="text-align: left;">numérique</td>
</tr>
<tr class="even">
<td style="text-align: left;">occup</td>
<td style="text-align: left;">Occupation principale</td>
<td style="text-align: left;">facteur (7 modalités)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">qualif</td>
<td style="text-align: left;">Qualification professionnelle</td>
<td style="text-align: left;">facteur (7 modalités)</td>
</tr>
<tr class="even">
<td style="text-align: left;">freres.soeurs</td>
<td style="text-align: left;">Nombre de frères et soeurs</td>
<td style="text-align: left;">entier</td>
</tr>
<tr class="odd">
<td style="text-align: left;">clso</td>
<td style="text-align: left;">Classe sociale</td>
<td style="text-align: left;">facteur (3 modalités)</td>
</tr>
<tr class="even">
<td style="text-align: left;">relig</td>
<td style="text-align: left;">Religion</td>
<td style="text-align: left;">facteur (6 modalités)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">trav.imp</td>
<td style="text-align: left;">Importance accordée au travail</td>
<td style="text-align: left;">facteur (4 modalités)</td>
</tr>
<tr class="even">
<td style="text-align: left;">trav.satisf</td>
<td style="text-align: left;">Satisfaction au travail</td>
<td style="text-align: left;">facteur (3 modalités)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hard.rock</td>
<td style="text-align: left;">Écoute du hard rock</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="even">
<td style="text-align: left;">lecture.bd</td>
<td style="text-align: left;">Lecture de bandes dessinées</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">peche.chasse</td>
<td style="text-align: left;">Pratique de la pêche ou de la chasse</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="even">
<td style="text-align: left;">cuisine</td>
<td style="text-align: left;">Pratique de la cuisine</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bricol</td>
<td style="text-align: left;">Pratique du bricolage</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="even">
<td style="text-align: left;">cinema</td>
<td style="text-align: left;">Fréquentation du cinéma</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sport</td>
<td style="text-align: left;">Pratique d'un sport</td>
<td style="text-align: left;">facteur (Oui, Non)</td>
</tr>
<tr class="even">
<td style="text-align: left;">heures.tv</td>
<td style="text-align: left;">Nombre d'heures passées devant la télévision</td>
<td style="text-align: left;">numérique</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div></div>
</section>
<section>
<section id="quelques-rappels" class="title-slide slide level1 inverse center" data-background-color="black">
<h1>Quelques rappels</h1>

</section>
<section id="lunivers-du-tidyverse" class="slide level2">
<h2>L’univers du <a href="https://www.tidyverse.org/" target="_blank"><code>tidyverse</code></a></h2>
<p><strong>Ensemble de packages partageant une même philosophie, structure et approche de la manipulation des données, conçus pour faciliter la manipulation, l’analyse et la visualisation des données</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)  </span>
<span id="cb1-2"><a href=""></a><span class="co"># installation simultanée de plusieurs packages</span></span>
<span id="cb1-3"><a href=""></a></span>
<span id="cb1-4"><a href=""></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-5"><a href=""></a><span class="co"># chargement des 9 packages au coeur du tidyverse</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="slide level2 unlisted unnumbered">
<h2></h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="img/tidyverse_workflow_2025_fondblanc.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img data-src="img/tidyverse_workflow_2025_fondblanc.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="Datascience et tidyverse."></a></p>
</figure>
</div>
</section>
<section id="la-commande-pipe" class="slide level2">
<h2>La commande pipe</h2>
<ul>
<li>Le pipe <code>%&gt;%</code>, introduit dès 2014 dans le package <a href="https://magrittr.tidyverse.org/index.html" target="_blank"><code>{magrittr}</code></a>, permet d’effectuer des opérations successives de traitement</li>
<li><strong>Principe</strong> : le pipe prend la sortie d’une fonction (ou d’une expression) et la passe automatiquement comme <strong>premier</strong> argument à la fonction suivante</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href=""></a>  <span class="fu">fonction1</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href=""></a>  <span class="fu">fonction2</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href=""></a>  <span class="fu">fonction3</span>()</span>
<span id="cb2-5"><a href=""></a><span class="co"># équivaut à </span></span>
<span id="cb2-6"><a href=""></a><span class="fu">fonction3</span>(<span class="fu">fonction2</span>(<span class="fu">fonction1</span>(data)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>En 2021 (R version 4.1.0), sortie du pipe natif <code>|&gt;</code>, dont le fonctionnement reste identique à l’autre pipe</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>data <span class="sc">|&gt;</span>  </span>
<span id="cb3-2"><a href=""></a>  <span class="fu">fonction1</span>() <span class="sc">|&gt;</span>  </span>
<span id="cb3-3"><a href=""></a>  <span class="fu">fonction2</span>() <span class="sc">|&gt;</span>  </span>
<span id="cb3-4"><a href=""></a>  <span class="fu">fonction3</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="math inline">\(\Rightarrow\)</span> <strong>Il est conseillé d’utiliser la commande <code>|&gt;</code></strong></p>
</section>
<section id="les-packages-utiles-pour-la-manipulation-des-données" class="slide level2">
<h2>Les packages utiles pour la manipulation des données</h2>
<ul>
<li><p><strong>Les indispensables</strong></p>
<ul>
<li><a href="https://dplyr.tidyverse.org/" target="_blank"><code>{dplyr}</code></a> : manipulation des données</li>
<li><a href="https://tidyr.tidyverse.org/" target="_blank"><code>{tidyr}</code></a> : nettoyage/remise en forme/formatage des données</li>
<li><a href="https://stringr.tidyverse.org/" target="_blank"><code>{stringr}</code></a> : manipulation des chaînes de caractères</li>
<li><a href="https://forcats.tidyverse.org/" target="_blank"><code>{forcats}</code></a> : traitement des variables qualitatives</li>
</ul></li>
<li><p><strong>Pour les formats dates et heures</strong></p>
<ul>
<li><a href="https://lubridate.tidyverse.org/" target="_blank"><code>{lubridate}</code></a> : manipulation des dates et heures</li>
<li><a href="https://hms.tidyverse.org/" target="_blank"><code>{hms}</code></a> : manipulation des heures du jour</li>
</ul></li>
</ul>
</section>
<section id="quest-ce-quun-tibble" class="slide level2">
<h2>Qu’est-ce-qu’un <a href="https://tibble.tidyverse.org/" target="_blank"><code>{tibble}</code></a> ?</h2>
<p><strong>= Une version modernisée des <em>dataframes</em>, plus pratique à utiliser que les <em>dataframes</em> “classiques”</strong></p>
<ul>
<li><em>dataframe</em> vs <em>tibble</em></li>
</ul>
<table class="caption-top">
<colgroup>
<col style="width: 18%">
<col style="width: 29%">
<col style="width: 51%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Critère</th>
<th style="text-align: left;">dataframe</th>
<th style="text-align: left;">tibble</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Affichage des données</strong></td>
<td style="text-align: left;">Toutes par défaut</td>
<td style="text-align: left;">Les premières lignes (pas de nom de lignes) ; les colonnes s’ajustent à l’écran avec des informations supplémentaires (type de colonne, dimension)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Noms des colonnes</strong></td>
<td style="text-align: left;">Restrictions</td>
<td style="text-align: left;">Caractères spéciaux, accents ou espaces autorisés (mais pas recommandés !)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Sélection d’une colonne</strong></td>
<td style="text-align: left;">La sélection d’une colonne devient un vecteur</td>
<td style="text-align: left;">La sélection d’une colonne reste un <em>tibble</em></td>
</tr>
</tbody>
</table>
<ul>
<li>Les <em>tibbles</em> sont plus rapides à manipuler (et plus stables) que les <em>dataframes</em></li>
<li>Possibilité de transformer un <em>dataframe</em> en <em>tibble</em> avec <code>tibble::as_tibble()</code></li>
</ul>
</section>
<section id="section-1" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 class="unlisted unnumbered" id="aperçu-des-2-formats">Aperçu des 2 formats</h3>
<h4 class="unnumbered" id="format-dataframe">Format <em>dataframe</em></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href=""></a>  <span class="fu">head</span>(<span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id age  sexe                                              nivetud    poids                 occup
1  1  28 Femme Enseignement superieur y compris technique superieur 2634.398 Exerce une profession
2  2  23 Femme                                                 &lt;NA&gt; 9738.396       Etudiant, eleve
   qualif freres.soeurs clso                       relig      trav.imp    trav.satisf hard.rock
1 Employe             8  Oui Ni croyance ni appartenance Peu important Insatisfaction       Non
2    &lt;NA&gt;             2  Oui Ni croyance ni appartenance          &lt;NA&gt;           &lt;NA&gt;       Non
  lecture.bd peche.chasse cuisine bricol cinema sport heures.tv
1        Non          Non     Oui    Non    Non   Non         0
2        Non          Non     Non    Non    Oui   Oui         1</code></pre>
</div>
</div>
<h4 class="unnumbered" id="format-tibble">Format <em>tibble</em></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href=""></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 20
     id   age sexe  nivetud        poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
  &lt;int&gt; &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
1     1    28 Femme Enseignement … 2634. Exer… Emplo…             8 Oui   Ni c… Peu imp… Insatisfac…
2     2    23 Femme &lt;NA&gt;           9738. Etud… &lt;NA&gt;               2 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;       
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-2" class="slide level2 unlisted unnumbered">
<h2></h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Pour la suite de la présentation</p>
<ul>
<li>on utilise le jeu de données <strong><code>hdv2003</code></strong> au format <em>tibble</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># Transformation au format tibble</span></span>
<span id="cb8-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href=""></a>  <span class="fu">as_tibble</span>() <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>on considère les variables ‘sexe’ et ‘clso’ comme des vecteurs de caractères, et non pas des facteurs</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="manipulations-des-données" class="title-slide slide level1 inverse center" data-background-color="black">
<h1>Manipulations des données</h1>

</section>
<section id="manipulations-avec-le-package-dplyr" class="slide level2">
<h2>Manipulations avec le package <a href="https://dplyr.tidyverse.org/" target="_blank"><code>{dplyr}</code></a></h2>
<p><strong>Les fonctions utiles pour</strong></p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><p><strong>manipuler des lignes/observations</strong></p>
<ul>
<li><code>slice()</code> : sélectionner des lignes suivant leur position</li>
<li><code>filter()</code> : sélectionner/filtrer des observations</li>
<li><code>distinct()</code> : supprimer les doublons</li>
<li><code>arrange()</code> : trier les données par ordre croissant (ou décroissant)</li>
</ul></li>
<li><p><strong>manipuler des colonnes/variables</strong></p>
<ul>
<li><code>select()</code> : sélectionner/extraire des variables</li>
<li><code>mutate()</code> : créer des variables</li>
<li><code>relocate()</code> : changer l’ordre d’une colonne</li>
<li><code>rename()</code> : changer le nom des variables</li>
<li><code>left_join()</code>, <code>right_join()</code>, <code>inner_join()</code> et <code>full_join()</code> : pour combiner les tables</li>
<li><code>rownames_to_column()</code> : ajouter le nom des lignes dans une variable</li>
</ul></li>
</ul>
</div><div class="column" style="width:40%;">
<ul>
<li><p><strong>faire des résumés et des opérations groupées</strong></p>
<ul>
<li><code>summarise()</code> : faire un résumé des données</li>
<li><code>count()</code> : compter le nombre d’observations</li>
<li><code>group_by()</code> : regroupement de données</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="section-3" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="sélectionner-des-lignes-avec-la-fonction-slice">Sélectionner des lignes avec la fonction <code>slice()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut afficher les 10 premières et les 10 dernières lignes du jeu de données</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span>  </span>
<span id="cb9-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1991</span><span class="sc">:</span><span class="dv">2000</span>) </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     1    28 Femme Enseignemen…  2634. Exer… Emplo…             8 Oui   Ni c… Peu imp… Insatisfac…
 2     2    23 Femme &lt;NA&gt;          9738. Etud… &lt;NA&gt;               2 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;       
 3     3    59 Homme Derniere an…  3994. Exer… Techn…             2 Non   Ni c… Aussi i… Equilibre  
 4     4    34 Homme Enseignemen…  5732. Exer… Techn…             1 Non   Appa… Moins i… Satisfacti…
 5     5    71 Femme Derniere an…  4329. Retr… Emplo…             0 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;       
 6     6    35 Femme Enseignemen…  8675. Exer… Emplo…             5 Non   Ni c… Le plus… Equilibre  
 7     7    60 Femme Derniere an…  6166. Au f… Ouvri…             1 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 8     8    47 Homme Enseignemen… 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac…
 9     9    20 Femme &lt;NA&gt;          7809. Etud… &lt;NA&gt;               4 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
10    10    28 Homme Enseignemen…  2277. Exer… Autre              2 Non   Prat… Moins i… Satisfacti…
11  1991    52 Femme Derniere an…  2801. Exer… Emplo…            10 Oui   Prat… Moins i… Equilibre  
12  1992    42 Femme Enseignemen…  2039. Chom… Ouvri…             2 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;       
13  1993    50 Homme Enseignemen… 12382. Exer… &lt;NA&gt;               3 Non   Prat… Moins i… Equilibre  
14  1994    41 Homme Enseignemen…  1114. Exer… Profe…             7 Non   Prat… Moins i… Satisfacti…
15  1995    46 Femme Enseignemen…  8408. Au f… Autre              0 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
16  1996    45 Homme Enseignemen…  8092. Exer… Techn…             3 Non   Ni c… Moins i… Equilibre  
17  1997    46 Homme Enseignemen…   956. Exer… Ouvri…             4 Oui   Prat… Le plus… Equilibre  
18  1998    24 Homme Enseignemen…  5320. Exer… Techn…             1 Oui   Rejet Moins i… Satisfacti…
19  1999    24 Femme Enseignemen… 13741. Exer… Emplo…             2 Non   Appa… Moins i… Equilibre  
20  2000    66 Femme Enseignemen…  7710. Au f… Emplo…             3 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-4" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="filtrer-des-observations-avec-la-fonction-filter">Filtrer des observations avec la fonction <code>filter()</code></h3>
<h4 id="filtre-sur-un-seul-critère">Filtre sur un seul critère</h4>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On filtre les individus dont l’occupation principale est “Exerce une profession”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href=""></a>  <span class="fu">filter</span>(occup <span class="sc">==</span> <span class="st">"Exerce une profession"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,049 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     1    28 Femme Enseignemen…  2634. Exer… Emplo…             8 Oui   Ni c… Peu imp… Insatisfac…
 2     3    59 Homme Derniere an…  3994. Exer… Techn…             2 Non   Ni c… Aussi i… Equilibre  
 3     4    34 Homme Enseignemen…  5732. Exer… Techn…             1 Non   Appa… Moins i… Satisfacti…
 4     6    35 Femme Enseignemen…  8675. Exer… Emplo…             5 Non   Ni c… Le plus… Equilibre  
 5     8    47 Homme Enseignemen… 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac…
 6    10    28 Homme Enseignemen…  2277. Exer… Autre              2 Non   Prat… Moins i… Satisfacti…
 7    12    47 Homme 2eme cycle    6698. Exer… Ouvri…             4 Oui   Appa… Moins i… Satisfacti…
 8    14    67 Femme Enseignemen…   587. Exer… &lt;NA&gt;               5 Oui   Prat… Moins i… Satisfacti…
 9    16    49 Femme Enseignemen…  9958. Exer… Emplo…             3 Non   Prat… Moins i… Equilibre  
10    20    39 Femme Enseignemen… 27196. Exer… Ouvri…             5 Non   Appa… Moins i… Satisfacti…
# ℹ 1,039 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Mise en garde</strong></p>
</div>
<div class="callout-content">
<p><strong>R est sensible à la casse !</strong><br>
Bien faire attention aux majuscules/minuscules</p>
</div>
</div>
</div>
</section>
<section id="section-5" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="filtre-sur-plusieurs-critères">Filtre sur plusieurs critères</h4>
<p>Se fait grâce aux opérateurs <code>&amp;</code> (ET) et <code>|</code> (OU)</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On filtre les femmes dont l’occupation principale est “Exerce une profession”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href=""></a>  <span class="fu">filter</span>(occup <span class="sc">==</span> <span class="st">"Exerce une profession"</span> <span class="sc">&amp;</span> sexe <span class="sc">==</span> <span class="st">"Femme"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 529 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     1    28 Femme Enseignemen…  2634. Exer… Emplo…             8 Oui   Ni c… Peu imp… Insatisfac…
 2     6    35 Femme Enseignemen…  8675. Exer… Emplo…             5 Non   Ni c… Le plus… Equilibre  
 3    14    67 Femme Enseignemen…   587. Exer… &lt;NA&gt;               5 Oui   Prat… Moins i… Satisfacti…
 4    16    49 Femme Enseignemen…  9958. Exer… Emplo…             3 Non   Prat… Moins i… Equilibre  
 5    20    39 Femme Enseignemen… 27196. Exer… Ouvri…             5 Non   Appa… Moins i… Satisfacti…
 6    21    30 Femme Enseignemen… 14648. Exer… Emplo…             6 Oui   Appa… Moins i… Satisfacti…
 7    23    37 Femme Enseignemen…  1282. Exer… Emplo…             4 Non   Appa… Moins i… Satisfacti…
 8    25    20 Femme &lt;NA&gt;          8780. Exer… Ouvri…             0 Non   Appa… Moins i… Equilibre  
 9    27    31 Femme Enseignemen…  6663. Exer… Ouvri…             1 Non   Appa… Moins i… Equilibre  
10    36    41 Femme 1er cycle     7872. Exer… Emplo…             3 Oui   Rejet Moins i… Insatisfac…
# ℹ 519 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-6" class="slide level2 unlisted unnumbered">
<h2></h2>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite filtrer les personnes avec la qualification professionnelle “Ouvrier specialise” ainsi que “Ouvrier qualifie”</span></p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><strong>| Avec l’opérateur <code>|</code> |</strong></a></li><li><a href="#tabset-1-2"><strong>| Avec l’opérateur <code>%in%</code> |</strong></a></li><li><a href="#tabset-1-3"><strong>| Avec la fonction <code>str_detect()</code> du package <code>{stringr}</code> |</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href=""></a>  <span class="fu">filter</span>(qualif <span class="sc">==</span> <span class="st">"Ouvrier specialise"</span> <span class="sc">|</span> qualif <span class="sc">==</span> <span class="st">"Ouvrier qualifie"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 495 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     7    60 Femme Derniere an…  6166. Au f… Ouvri…             1 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 2     8    47 Homme Enseignemen… 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac…
 3    12    47 Homme 2eme cycle    6698. Exer… Ouvri…             4 Oui   Appa… Moins i… Satisfacti…
 4    19    70 Homme Derniere an…  3141. Retr… Ouvri…             2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 5    20    39 Femme Enseignemen… 27196. Exer… Ouvri…             5 Non   Appa… Moins i… Satisfacti…
 6    25    20 Femme &lt;NA&gt;          8780. Exer… Ouvri…             0 Non   Appa… Moins i… Equilibre  
 7    27    31 Femme Enseignemen…  6663. Exer… Ouvri…             1 Non   Appa… Moins i… Equilibre  
 8    28    35 Homme 1er cycle     3359. Exer… Ouvri…             6 Non   Ni c… Moins i… Equilibre  
 9    29    35 Homme Enseignemen…  8536. Exer… Ouvri…             2 Non   Appa… Moins i… Equilibre  
10    30    30 Homme Enseignemen… 10621. Exer… Ouvri…             1 Oui   Ni c… Aussi i… Satisfacti…
# ℹ 485 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href=""></a>  <span class="fu">filter</span>(qualif <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ouvrier specialise"</span>, <span class="st">"Ouvrier qualifie"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 495 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     7    60 Femme Derniere an…  6166. Au f… Ouvri…             1 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 2     8    47 Homme Enseignemen… 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac…
 3    12    47 Homme 2eme cycle    6698. Exer… Ouvri…             4 Oui   Appa… Moins i… Satisfacti…
 4    19    70 Homme Derniere an…  3141. Retr… Ouvri…             2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 5    20    39 Femme Enseignemen… 27196. Exer… Ouvri…             5 Non   Appa… Moins i… Satisfacti…
 6    25    20 Femme &lt;NA&gt;          8780. Exer… Ouvri…             0 Non   Appa… Moins i… Equilibre  
 7    27    31 Femme Enseignemen…  6663. Exer… Ouvri…             1 Non   Appa… Moins i… Equilibre  
 8    28    35 Homme 1er cycle     3359. Exer… Ouvri…             6 Non   Ni c… Moins i… Equilibre  
 9    29    35 Homme Enseignemen…  8536. Exer… Ouvri…             2 Non   Appa… Moins i… Equilibre  
10    30    30 Homme Enseignemen… 10621. Exer… Ouvri…             1 Oui   Ni c… Aussi i… Satisfacti…
# ℹ 485 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(qualif, <span class="st">"Ouvrier"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 495 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1     7    60 Femme Derniere an…  6166. Au f… Ouvri…             1 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 2     8    47 Homme Enseignemen… 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac…
 3    12    47 Homme 2eme cycle    6698. Exer… Ouvri…             4 Oui   Appa… Moins i… Satisfacti…
 4    19    70 Homme Derniere an…  3141. Retr… Ouvri…             2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 5    20    39 Femme Enseignemen… 27196. Exer… Ouvri…             5 Non   Appa… Moins i… Satisfacti…
 6    25    20 Femme &lt;NA&gt;          8780. Exer… Ouvri…             0 Non   Appa… Moins i… Equilibre  
 7    27    31 Femme Enseignemen…  6663. Exer… Ouvri…             1 Non   Appa… Moins i… Equilibre  
 8    28    35 Homme 1er cycle     3359. Exer… Ouvri…             6 Non   Ni c… Moins i… Equilibre  
 9    29    35 Homme Enseignemen…  8536. Exer… Ouvri…             2 Non   Appa… Moins i… Equilibre  
10    30    30 Homme Enseignemen… 10621. Exer… Ouvri…             1 Oui   Ni c… Aussi i… Satisfacti…
# ℹ 485 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-7" class="slide level2 unlisted unnumbered">
<h2></h2>
<div title="Opérateurs logiques les plus courants">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Opérateurs logiques les plus courants</strong></p>
</div>
<div class="callout-content">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Opérateur</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>&lt;</code></td>
<td style="text-align: left;">Inférieur à</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&lt;=</code></td>
<td style="text-align: left;">Inférieur ou égal à</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>&gt;</code></td>
<td style="text-align: left;">Supérieur à</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&gt;=</code></td>
<td style="text-align: left;">Supérieur ou égal à</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>==</code></td>
<td style="text-align: left;">Exactement égal à</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>!=</code></td>
<td style="text-align: left;">Différent de</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>|</code></td>
<td style="text-align: left;">Ou</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&amp;</code></td>
<td style="text-align: left;">Et</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>%in%</code></td>
<td style="text-align: left;">Appartient à</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>is.na()</code></td>
<td style="text-align: left;">Est une donnée manquante</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>!is.na()</code></td>
<td style="text-align: left;">N’est pas une donnée manquante</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</section>
<section id="section-8" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="supprimer-les-doublons-avec-la-fonction-distinct">Supprimer les doublons avec la fonction <code>distinct()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On supprime les doublons à partir de la variable ‘sexe’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href=""></a>  <span class="fu">distinct</span>(sexe)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  sexe 
  &lt;chr&gt;
1 Femme
2 Homme</code></pre>
</div>
</div>
<p>Il est possible de supprimer les doublons à partir de plusieurs critères</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On supprime les doublons à partir de la variable ‘sexe’ et ‘relig’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href=""></a>  <span class="fu">distinct</span>(sexe, relig)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   sexe  relig                      
   &lt;chr&gt; &lt;fct&gt;                      
 1 Femme Ni croyance ni appartenance
 2 Homme Ni croyance ni appartenance
 3 Homme Appartenance sans pratique 
 4 Femme Pratiquant regulier        
 5 Femme Appartenance sans pratique 
 6 Homme Pratiquant occasionnel     
 7 Femme Pratiquant occasionnel     
 8 Homme Pratiquant regulier        
 9 Femme Rejet                      
10 Homme NSP ou NVPR                
11 Homme Rejet                      
12 Femme NSP ou NVPR                </code></pre>
</div>
</div>
</section>
<section id="section-9" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="trier-les-données-avec-la-fonction-arrange">Trier les données avec la fonction <code>arrange()</code></h3>
<h4 id="tri-sur-un-seul-critère">Tri sur un seul critère</h4>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On trie les données par ordre croissant de ‘age’</span></p>
<div class="cell" data-output.lines="8">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href=""></a>  <span class="fu">arrange</span>(age)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1   162    18 Homme &lt;NA&gt;          4983. Etud… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 2   215    18 Homme &lt;NA&gt;          4631. Etud… &lt;NA&gt;               2 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;       
 3   346    18 Femme &lt;NA&gt;          1725. Etud… &lt;NA&gt;               9 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 4   377    18 Homme &lt;NA&gt;         11213. Etud… &lt;NA&gt;               1 Oui   Rejet &lt;NA&gt;     &lt;NA&gt;       
 5   511    18 Homme &lt;NA&gt;          2448. Etud… &lt;NA&gt;               6 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
...</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>La fonction <code>arrange()</code> trie les valeurs par ordre croissant par défaut, mais on peut trier par ordre décroissant grâce à la fonction <code>desc()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href=""></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1  1916    97 Femme Derniere an…  2163. Autr… Autre              5 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 2   270    96 Femme Derniere an…  9993. Retr… &lt;NA&gt;               1 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;       
 3  1542    93 Femme Derniere an…  7108. Reti… &lt;NA&gt;               7 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 4   235    92 Homme N'a jamais …   827. Retr… Ouvri…             0 Ne s… Prat… &lt;NA&gt;     &lt;NA&gt;       
 5  1151    91 Homme Derniere an…  4291. Reti… &lt;NA&gt;               3 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 6    96    90 Femme Derniere an…  5875. Au f… Emplo…             7 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 7  1122    90 Femme 1er cycle    14812. Retr… Emplo…             3 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;       
 8  1767    90 Femme Derniere an… 12266. Reti… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 9   759    89 Femme Derniere an…  9555. Au f… &lt;NA&gt;               1 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
10   971    89 Homme Derniere an…  2374. Retr… Ouvri…             5 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;       
# ℹ 1,990 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-10" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="tri-sur-plusieurs-critères">Tri sur plusieurs critères</h4>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On trie les données par ordre alphabétique croissant pour la variable ‘sexe’ et par valeurs décroissantes pour la variable ‘age’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href=""></a>  <span class="fu">arrange</span>(sexe, <span class="fu">desc</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 20
      id   age sexe  nivetud       poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf
   &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;fct&gt;         &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;      
 1  1916    97 Femme Derniere an…  2163. Autr… Autre              5 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 2   270    96 Femme Derniere an…  9993. Retr… &lt;NA&gt;               1 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;       
 3  1542    93 Femme Derniere an…  7108. Reti… &lt;NA&gt;               7 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 4    96    90 Femme Derniere an…  5875. Au f… Emplo…             7 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 5  1122    90 Femme 1er cycle    14812. Retr… Emplo…             3 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;       
 6  1767    90 Femme Derniere an… 12266. Reti… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
 7   759    89 Femme Derniere an…  9555. Au f… &lt;NA&gt;               1 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
 8  1117    89 Femme A arrete se…  5677. Au f… Ouvri…             5 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;       
 9  1127    89 Femme A arrete se… 25986. Autr… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;     &lt;NA&gt;       
10  1516    88 Femme Derniere an… 15686. Reti… &lt;NA&gt;               2 Non   Prat… &lt;NA&gt;     &lt;NA&gt;       
# ℹ 1,990 more rows
# ℹ 8 more variables: hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;,
#   bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-11" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="sélectionner-des-colonnes-avec-select">Sélectionner des colonnes avec <code>select()</code></h3>
<h4 id="sélection-dune-seule-variable">Sélection d’une seule variable</h4>
<p><strong>2 possibilités</strong>, avec la fonction <code>select()</code> ou avec la fonction <code>pull()</code></p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On sélectionne la variable ‘sexe’</span></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href=""></a>  <span class="fu">select</span>(sexe)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 1
   sexe 
   &lt;chr&gt;
 1 Femme
 2 Femme
 3 Homme
 4 Homme
 5 Femme
 6 Femme
 7 Femme
 8 Homme
 9 Femme
10 Homme
# ℹ 1,990 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell" data-output.lines="13">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href=""></a>  <span class="fu">pull</span>(sexe)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] "Femme" "Femme" "Homme" "Homme" "Femme" "Femme" "Femme" "Homme" "Femme" "Homme" "Femme"
  [12] "Homme" "Femme" "Femme" "Femme" "Femme" "Homme" "Femme" "Homme" "Femme" "Femme" "Homme"
  [23] "Femme" "Femme" "Femme" "Homme" "Femme" "Homme" "Homme" "Homme" "Homme" "Homme" "Homme"
  [34] "Homme" "Femme" "Femme" "Homme" "Femme" "Femme" "Homme" "Femme" "Homme" "Homme" "Femme"
  [45] "Femme" "Homme" "Femme" "Femme" "Femme" "Femme" "Homme" "Femme" "Homme" "Femme" "Homme"
  [56] "Femme" "Femme" "Femme" "Homme" "Femme" "Femme" "Homme" "Homme" "Homme" "Homme" "Femme"
  [67] "Homme" "Homme" "Femme" "Femme" "Homme" "Homme" "Femme" "Femme" "Femme" "Femme" "Homme"
  [78] "Femme" "Femme" "Femme" "Femme" "Femme" "Femme" "Homme" "Homme" "Femme" "Homme" "Homme"
  [89] "Homme" "Homme" "Homme" "Femme" "Homme" "Femme" "Femme" "Femme" "Homme" "Homme" "Femme"
 [100] "Femme" "Femme" "Homme" "Femme" "Homme" "Homme" "Femme" "Femme" "Femme" "Femme" "Homme"
 [111] "Homme" "Homme" "Homme" "Homme" "Femme" "Homme" "Homme" "Femme" "Homme" "Homme" "Femme"
 [122] "Femme" "Femme" "Homme" "Femme" "Femme" "Homme" "Femme" "Femme" "Homme" "Femme" "Homme"
 [133] "Femme" "Femme" "Femme" "Homme" "Homme" "Homme" "Homme" "Homme" "Homme" "Homme" "Homme"
...</code></pre>
</div>
</div>
</div></div>
<div title="Quelle différence entre `pull()` et `select()` ?">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Quelle différence entre <code>pull()</code> et <code>select()</code> ?</strong></p>
</div>
<div class="callout-content">
<ul>
<li>La fonction <code>pull()</code> renvoie une seule colonne sous forme de vecteur.<br>
</li>
<li>La fonction <code>select()</code> renvoie une ou plusieurs colonnes sous forme de <em>dataframe</em>.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="section-12" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="sélectionner-plusieurs-variables-avec-select">Sélectionner <strong>plusieurs</strong> variables avec <code>select()</code></h4>
<div class="columns">
<div class="column" style="width:45%;">
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On sélectionne UNIQUEMENT les variables ‘sexe’ et ‘age’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href=""></a>  <span class="fu">select</span>(sexe, age)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 2
   sexe    age
   &lt;chr&gt; &lt;int&gt;
 1 Femme    28
 2 Femme    23
 3 Homme    59
 4 Homme    34
 5 Femme    71
 6 Femme    35
 7 Femme    60
 8 Homme    47
 9 Femme    20
10 Homme    28
# ℹ 1,990 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:55%;">
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On sélectionne toutes les variables SAUF les variables ‘sexe’ et ‘age’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(sexe, age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 18
      id nivetud         poids occup qualif freres.soeurs clso  relig trav.imp trav.satisf hard.rock
   &lt;int&gt; &lt;fct&gt;           &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;       &lt;fct&gt;    
 1     1 Enseignement …  2634. Exer… Emplo…             8 Oui   Ni c… Peu imp… Insatisfac… Non      
 2     2 &lt;NA&gt;            9738. Etud… &lt;NA&gt;               2 Oui   Ni c… &lt;NA&gt;     &lt;NA&gt;        Non      
 3     3 Derniere anne…  3994. Exer… Techn…             2 Non   Ni c… Aussi i… Equilibre   Non      
 4     4 Enseignement …  5732. Exer… Techn…             1 Non   Appa… Moins i… Satisfacti… Non      
 5     5 Derniere anne…  4329. Retr… Emplo…             0 Oui   Prat… &lt;NA&gt;     &lt;NA&gt;        Non      
 6     6 Enseignement …  8675. Exer… Emplo…             5 Non   Ni c… Le plus… Equilibre   Non      
 7     7 Derniere anne…  6166. Au f… Ouvri…             1 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;        Non      
 8     8 Enseignement … 12892. Exer… Ouvri…             5 Non   Ni c… Peu imp… Insatisfac… Non      
 9     9 &lt;NA&gt;            7809. Etud… &lt;NA&gt;               4 Oui   Appa… &lt;NA&gt;     &lt;NA&gt;        Non      
10    10 Enseignement …  2277. Exer… Autre              2 Non   Prat… Moins i… Satisfacti… Non      
# ℹ 1,990 more rows
# ℹ 7 more variables: lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;, bricol &lt;fct&gt;,
#   cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-13" class="slide level2 unlisted unnumbered">
<h2></h2>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On sélectionne toutes les variables dont le nom contient “trav”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href=""></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"trav"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 2
   trav.imp                     trav.satisf   
   &lt;fct&gt;                        &lt;fct&gt;         
 1 Peu important                Insatisfaction
 2 &lt;NA&gt;                         &lt;NA&gt;          
 3 Aussi important que le reste Equilibre     
 4 Moins important que le reste Satisfaction  
 5 &lt;NA&gt;                         &lt;NA&gt;          
 6 Le plus important            Equilibre     
 7 &lt;NA&gt;                         &lt;NA&gt;          
 8 Peu important                Insatisfaction
 9 &lt;NA&gt;                         &lt;NA&gt;          
10 Moins important que le reste Satisfaction  
# ℹ 1,990 more rows</code></pre>
</div>
</div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Les tests sur le nom des variables peuvent se faire avec différentes fonctions :</p>
<ul>
<li><code>contains()</code></li>
<li><code>starts_with()</code></li>
<li><code>ends_with()</code></li>
<li><code>matches()</code></li>
</ul>
<p>Ce ne sont pas les seules fonctions pour sélectionner des variables, il existe bien d’autres façons, qui sont détaillées dans la page d’aide de la fonction <code>select()</code> du package <code>{dplyr}</code>.</p>
</div>
</div>
</div>
</section>
<section id="section-14" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="créerajouter-de-nouvelles-variables-avec-mutate">Créer/ajouter de nouvelles variables avec <code>mutate()</code></h3>
<div class="columns">
<div class="column" style="width:55%;">
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On ajoute dans le jeu de données <strong><code>hdv2003</code></strong>, la variable ‘an_nais’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">an_nais =</span> <span class="dv">2003</span> <span class="sc">-</span> age) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-important callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p><strong>Penser à affecter le résultat à un dataframe/tibble !</strong></p>
</div>
</div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href=""></a>  <span class="fu">names</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"            "age"           "sexe"          "nivetud"       "poids"         "occup"        
 [7] "qualif"        "freres.soeurs" "clso"          "relig"         "trav.imp"      "trav.satisf"  
[13] "hard.rock"     "lecture.bd"    "peche.chasse"  "cuisine"       "bricol"        "cinema"       
[19] "sport"         "heures.tv"     "an_nais"      </code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:40%;">
<ul>
<li><p>La fonction <code>mutate()</code> peut également</p>
<ul>
<li>modifier une variable existante si le nom est le même que celui d’une colonne existante</li>
<li>supprimer une variable en fixant sa valeur à <code>NULL</code></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="cn">NULL</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href=""></a>  <span class="fu">names</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"            "sexe"          "nivetud"       "poids"         "occup"         "qualif"       
 [7] "freres.soeurs" "clso"          "relig"         "trav.imp"      "trav.satisf"   "hard.rock"    
[13] "lecture.bd"    "peche.chasse"  "cuisine"       "bricol"        "cinema"        "sport"        
[19] "heures.tv"     "an_nais"      </code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Le package <a href="https://jacobkap.github.io/fastDummies/" target="_blank"><code>{fastDummies}</code></a> est très utile pour créer rapidement des colonnes <em>dummy</em> à partir de variables catégorielles, avec la fonction <code>dummy_cols()</code></p>
<div class="cell" data-output.lines="7">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href=""></a>  <span class="fu">select</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href=""></a>  fastDummies<span class="sc">::</span><span class="fu">dummy_cols</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 3
   sexe  sexe_Femme sexe_Homme
   &lt;chr&gt;      &lt;int&gt;      &lt;int&gt;
 1 Femme          1          0
 2 Femme          1          0
 3 Homme          0          1
 4 Homme          0          1
...</code></pre>
</div>
</div>
<p>Le nom des <em>dummies</em> créées automatiquement sont de la forme <em><code>variable_modalite</code></em></p>
</div>
</div>
</div>
</section>
<section id="section-15" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="effectuer-des-transformations-sur-plusieurs-variables-en-utilisant-la-fonction-across">Effectuer des transformations sur plusieurs variables, en utilisant la fonction <code>across()</code></h4>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite transformer tous les facteurs en variables “character”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell" data-output.lines="15">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="co"># Variables initiales</span></span>
<span id="cb49-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href=""></a>  <span class="fu">str</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [2,000 × 21] (S3: tbl_df/tbl/data.frame)
 $ id           : int [1:2000] 1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : chr [1:2000] "Femme" "Femme" "Homme" "Homme" ...
 $ nivetud      : Factor w/ 8 levels "N'a jamais fait d'etudes",..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num [1:2000] 2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels "Exerce une profession",..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels "Ouvrier specialise",..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int [1:2000] 8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : chr [1:2000] "Oui" "Oui" "Non" "Non" ...
 $ relig        : Factor w/ 6 levels "Pratiquant regulier",..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels "Le plus important",..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels "Satisfaction",..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
...</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a><span class="co"># Variables après modification</span></span>
<span id="cb51-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href=""></a>  <span class="fu">str</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>tibble [2,000 × 21] (S3: tbl_df/tbl/data.frame)
 $ id           : int [1:2000] 1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : chr [1:2000] "Femme" "Femme" "Homme" "Homme" ...
 $ nivetud      : chr [1:2000] "Enseignement superieur y compris technique superieur" NA "Derniere annee d'etudes primaires" "Enseignement superieur y compris technique superieur" ...
 $ poids        : num [1:2000] 2634 9738 3994 5732 4329 ...
 $ occup        : chr [1:2000] "Exerce une profession" "Etudiant, eleve" "Exerce une profession" "Exerce une profession" ...
 $ qualif       : chr [1:2000] "Employe" NA "Technicien" "Technicien" ...
 $ freres.soeurs: int [1:2000] 8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : chr [1:2000] "Oui" "Oui" "Non" "Non" ...
 $ relig        : chr [1:2000] "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Appartenance sans pratique" ...
 $ trav.imp     : chr [1:2000] "Peu important" NA "Aussi important que le reste" "Moins important que le reste" ...
 $ trav.satisf  : chr [1:2000] "Insatisfaction" NA "Equilibre" "Satisfaction" ...
 $ hard.rock    : chr [1:2000] "Non" "Non" "Non" "Non" ...
 $ lecture.bd   : chr [1:2000] "Non" "Non" "Non" "Non" ...
 $ peche.chasse : chr [1:2000] "Non" "Non" "Non" "Non" ...
 $ cuisine      : chr [1:2000] "Oui" "Non" "Non" "Oui" ...
 $ bricol       : chr [1:2000] "Non" "Non" "Non" "Oui" ...
 $ cinema       : chr [1:2000] "Non" "Oui" "Non" "Oui" ...
 $ sport        : chr [1:2000] "Non" "Oui" "Oui" "Oui" ...
 $ heures.tv    : num [1:2000] 0 1 0 2 3 2 2.9 1 2 2 ...
 $ an_nais      : num [1:2000] 1975 1980 1944 1969 1932 ...</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-16" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="effectuer-des-transformations-en-utilisant-des-conditions">Effectuer des transformations en utilisant des conditions</h4>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On ajoute dans le jeu de données <strong><code>hdv2003</code></strong>, la variable variable ‘cl_age’</span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><strong>| Avec la fonction <code>if_else()</code> |</strong></a></li><li><a href="#tabset-2-2"><strong>| Avec la fonction <code>case_when()</code> |</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">cl_age =</span> <span class="fu">if_else</span>(age <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">29</span>, <span class="st">"15 à 29 ans"</span>,</span>
<span id="cb53-3"><a href=""></a>                          <span class="fu">if_else</span>(age <span class="sc">&gt;=</span> <span class="dv">30</span>  <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">44</span>, <span class="st">"30 à 44 ans"</span>,</span>
<span id="cb53-4"><a href=""></a>                                  <span class="fu">if_else</span>(age <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">59</span>, <span class="st">"45 à 59 ans"</span>,</span>
<span id="cb53-5"><a href=""></a>                                          <span class="fu">if_else</span>(age <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">75</span>, <span class="st">"60 à 74 ans"</span>, </span>
<span id="cb53-6"><a href=""></a>                                                  <span class="st">"75 ans et plus"</span>))))) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="co"># Distribution de la variable cl_age</span></span>
<span id="cb54-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href=""></a>  <span class="fu">select</span>(cl_age) <span class="sc">|&gt;</span> </span>
<span id="cb54-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>(<span class="at">total =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  n     %  val%
15 à 29 ans     302  15.1  15.1
30 à 44 ans     573  28.6  28.6
45 à 59 ans     609  30.4  30.4
60 à 74 ans     384  19.2  19.2
75 ans et plus  132   6.6   6.6
Total          2000 100.0 100.0</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">cl_age =</span> <span class="fu">case_when</span>(age <span class="sc">&gt;=</span> <span class="dv">15</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">29</span> <span class="sc">~</span> <span class="st">"15 à 29 ans"</span>,</span>
<span id="cb56-3"><a href=""></a>                            age <span class="sc">&gt;=</span> <span class="dv">30</span>  <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">44</span> <span class="sc">~</span> <span class="st">"30 à 44 ans"</span>,</span>
<span id="cb56-4"><a href=""></a>                            age <span class="sc">&gt;=</span> <span class="dv">45</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">59</span> <span class="sc">~</span> <span class="st">"45 à 59 ans"</span>,</span>
<span id="cb56-5"><a href=""></a>                            age <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">&amp;</span> age <span class="sc">&lt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="st">"60 à 74 ans"</span>, </span>
<span id="cb56-6"><a href=""></a>                            age <span class="sc">&gt;=</span> <span class="dv">75</span> <span class="sc">~</span> <span class="st">"75 ans et plus"</span>,</span>
<span id="cb56-7"><a href=""></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"ERREUR"</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="co"># Distribution de la variable cl_age</span></span>
<span id="cb57-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href=""></a>  <span class="fu">select</span>(cl_age) <span class="sc">|&gt;</span> </span>
<span id="cb57-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>(<span class="at">total =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  n     %  val%
15 à 29 ans     302  15.1  15.1
30 à 44 ans     573  28.6  28.6
45 à 59 ans     609  30.4  30.4
60 à 74 ans     384  19.2  19.2
75 ans et plus  132   6.6   6.6
Total          2000 100.0 100.0</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-17" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="réordonner-les-variables-avec-la-fonction-relocate">Réordonner les variables avec la fonction <code>relocate()</code></h3>
<p>Les nouvelles variables ajoutées avec <code>mutate()</code> se positionnent toujours à la fin du jeu de données</p>
<p>Il est possible de les positionner où l’on souhaite, avec la fonction <code>relocate()</code></p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On positionne la variable ‘an_nais’ juste après la variable ‘age’ dans le jeu de données <strong><code>hdv2003</code></strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href=""></a>  <span class="fu">relocate</span>(an_nais, <span class="at">.after =</span> age) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="co"># Variables après modification</span></span>
<span id="cb60-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href=""></a>  <span class="fu">names</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"            "age"           "an_nais"       "sexe"          "nivetud"       "poids"        
 [7] "occup"         "qualif"        "freres.soeurs" "clso"          "relig"         "trav.imp"     
[13] "trav.satisf"   "hard.rock"     "lecture.bd"    "peche.chasse"  "cuisine"       "bricol"       
[19] "cinema"        "sport"         "heures.tv"     "cl_age"       </code></pre>
</div>
</div>
<p>On aurait également pu obtenir le même résultat en utilisant <code>.before</code> dans la fonction</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href=""></a>  <span class="fu">relocate</span>(an_nais, <span class="at">.before =</span> sexe) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>La fonction <code>relocate()</code> s’utilise soit avec les paramètres <code>.before =</code> ou <code>.after =</code> et dans ces paramètres, on peut utiliser les fonctions <code>last_col()</code> (= dernière colonne) ou <code>everything()</code> (= toutes les variables)</p>
</div>
</div>
</div>
</section>
<section id="section-18" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="modifier-le-nom-dune-variable-avec-rename">Modifier le nom d’une variable avec <code>rename()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On renomme la variable ‘an_nais’ en ‘an.naissance’ dans <strong><code>hdv2003</code></strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a href=""></a>  <span class="fu">rename</span>(<span class="at">an.naissance =</span> an_nais) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a><span class="co"># Variables initiales</span></span>
<span id="cb64-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb64-3"><a href=""></a>  <span class="fu">names</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"            "age"           "an_nais"       "sexe"          "nivetud"       "poids"        
 [7] "occup"         "qualif"        "freres.soeurs" "clso"          "relig"         "trav.imp"     
[13] "trav.satisf"   "hard.rock"     "lecture.bd"    "peche.chasse"  "cuisine"       "bricol"       
[19] "cinema"        "sport"         "heures.tv"     "cl_age"       </code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a><span class="co"># Variables après modification</span></span>
<span id="cb66-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb66-3"><a href=""></a>  <span class="fu">names</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"            "age"           "an.naissance"  "sexe"          "nivetud"       "poids"        
 [7] "occup"         "qualif"        "freres.soeurs" "clso"          "relig"         "trav.imp"     
[13] "trav.satisf"   "hard.rock"     "lecture.bd"    "peche.chasse"  "cuisine"       "bricol"       
[19] "cinema"        "sport"         "heures.tv"     "cl_age"       </code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Le package <a href="https://sfirke.github.io/janitor/index.html" target="_blank"><code>{janitor}</code></a> (qui suit les principes du <code>tidyverse</code> et est parfaitement compatible avec le pipe), est utile pour nettoyer</p>
<div class="columns">
<div class="column">
<ul>
<li><p>le nom des colonnes, avec la fonction <code>clean_names()</code></p>
<ul>
<li>convertit tous les noms en minuscules</li>
<li>remplace les espaces et les caractères spéciaux par des <code>_</code></li>
<li>supprime les caractères non alphanumériques</li>
<li>assure la cohérence du format des noms</li>
</ul></li>
</ul>
</div><div class="column">
<ul>
<li><p>les vecteurs (et donc le contenu des données), avec la fonction <code>make_clean_names()</code>, plus générale, qui permet de</p>
<ul>
<li>choisir le format de casse (snake_case, camelCase, etc.)</li>
<li>remplacer certains caractères spécifiques</li>
</ul></li>
</ul>
</div></div>
</div>
</div>
</div>
</section>
<section id="section-19" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="combiner-des-jeux-de-données">Combiner des jeux de données</h3>
<p>Pour combiner les données de 2 (ou plusieurs) jeux de données/tables, on effectue une <strong>jointure</strong></p>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Il existe différentes jointures :</p>
<ul>
<li><strong>jointure à gauche</strong> (<em>left join</em>) : conserve toutes les observations de la table de gauche même si elles ne sont pas présentes dans la table de droite</li>
<li><strong>jointure à droite</strong> (<em>right join</em>): conserve toutes les observations de la table de droite même si elles ne sont pas présentes dans la table de gauche</li>
<li><strong>jointure interne</strong> (<em>inner join</em>) : conserve les observations qui sont présentes dans les 2 tables</li>
<li><strong>jointure externe</strong> (<em>full join</em>) : conserve toutes les observations, présentes dans l’une ou l’autre des tables</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-important callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Pour pouvoir faire une jointure, il faut une <strong><em>clé</em></strong>, c’est à dire une variable commune aux 2 jeux de données, qui peut avoir ou non, le même nom</p>
</div>
</div>
</div>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On supppose que l’on souhaite regrouper les données de deux jeux de données, nommés <strong><code>data1</code></strong> et <strong><code>data2</code></strong> </span></p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a><span class="co"># Données data1</span></span>
<span id="cb68-2"><a href=""></a>data1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb68-3"><a href=""></a>                <span class="at">sexe =</span> <span class="fu">c</span>(<span class="st">'F'</span>, <span class="st">'H'</span>, <span class="st">'H'</span>, <span class="st">'F'</span>, <span class="st">'F'</span>),</span>
<span id="cb68-4"><a href=""></a>                <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">57</span>, <span class="dv">88</span>, <span class="dv">32</span>, <span class="dv">44</span>))</span>
<span id="cb68-5"><a href=""></a><span class="fu">print</span>(data1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
     id sexe    age
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     1 F        25
2     2 H        57
3     3 H        88
4     4 F        32
5     5 F        44</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="co"># Données data2</span></span>
<span id="cb70-2"><a href=""></a>data2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ident =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>),</span>
<span id="cb70-3"><a href=""></a>                <span class="at">localisation =</span> <span class="fu">c</span>(<span class="st">"Bordeaux/33"</span>, <span class="st">"Cestas/33"</span>, <span class="st">"Bordeaux/33"</span>, <span class="st">"Dax/40"</span>),</span>
<span id="cb70-4"><a href=""></a>                <span class="at">code =</span> <span class="fu">c</span>(<span class="st">"063"</span>, <span class="st">"122"</span>, <span class="st">"063"</span>, <span class="st">"088"</span>),</span>
<span id="cb70-5"><a href=""></a>                <span class="at">revenu =</span> <span class="fu">c</span>(<span class="dv">2500</span>, <span class="dv">3000</span>, <span class="dv">3700</span>, <span class="dv">1850</span>))</span>
<span id="cb70-6"><a href=""></a><span class="fu">print</span>(data2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  ident localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 Bordeaux/33  063     2500
2     3 Cestas/33    122     3000
3     4 Bordeaux/33  063     3700
4     6 Dax/40       088     1850</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-20" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="jointure-à-gauche">Jointure à gauche</h4>
<p>Cette jointure va ajouter à la suite des colonnes de <strong><code>data1</code></strong>, les colonnes de <strong><code>data2</code></strong>, en ne conservant que les lignes de <strong><code>data1</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>data1 <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href=""></a>  <span class="fu">left_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"ident"</span>)) <span class="ot">-&gt;</span> data_leftjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>data_leftjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
     id sexe    age localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;      NA
3     3 H        88 Cestas/33    122     3000
4     4 F        32 Bordeaux/33  063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;      NA</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>Les observations du jeu de données de gauche (<strong><code>data1</code></strong>) qui n’existent pas dans le jeu de données de droite (<strong><code>data2</code></strong>) sont conservées<br>
</li>
<li>Pour ces observations, on a des données manquantes dans les colonnes de <strong><code>data2</code></strong><br>
</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Dans le cas où la clé de jointure à le même nom dans les deux tables (par exemple “cle”), la fonction s’écrit comme suit</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href=""></a>data1 <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href=""></a>  <span class="fu">left_join</span>(data2, <span class="at">by =</span> <span class="st">"cle"</span>) <span class="ot">-&gt;</span> data_leftjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="section-21" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="jointure-à-droite">Jointure à droite</h4>
<p>Cette jointure va ajouter à la suite des colonnes de <strong><code>data1</code></strong>, les colonnes de <strong><code>data2</code></strong>, en ne conservant que les lignes de <strong><code>data2</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a>data1 <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href=""></a>  <span class="fu">right_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"ident"</span>)) <span class="ot">-&gt;</span> data_rightjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a>data_rightjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
     id sexe    age localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  063     2500
2     3 H        88 Cestas/33    122     3000
3     4 F        32 Bordeaux/33  063     3700
4     6 &lt;NA&gt;     NA Dax/40       088     1850</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>Les observations du jeu de données de droite (<strong><code>data2</code></strong>) qui n’existent pas dans le jeu de données de gauche (<strong><code>data1</code></strong>) sont conservées<br>
</li>
<li>Pour ces observations, on a des données manquantes dans les colonnes de <strong><code>data1</code></strong></li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-22" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="jointure-interne">Jointure interne</h4>
<p>Cette jointure va ajouter à la suite des colonnes de <strong><code>data1</code></strong>, les colonnes de <strong><code>data2</code></strong>, en ne conservant que les lignes communes à <strong><code>data1</code></strong> et <strong><code>data2</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a>data1 <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href=""></a>  <span class="fu">inner_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"ident"</span>)) <span class="ot">-&gt;</span> data_innerjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href=""></a>data_innerjoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
     id sexe    age localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  063     2500
2     3 H        88 Cestas/33    122     3000
3     4 F        32 Bordeaux/33  063     3700</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>Seules les observations communes aux deux jeux de données <strong><code>data1</code></strong> et <strong><code>data2</code></strong> sont conservées<br>
</li>
<li>Il n’y a donc aucune valeur manquante dans le résultat de la jointure</li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-23" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="jointure-externe">Jointure externe</h4>
<p>Cette jointure va ajouter à la suite des colonnes de <strong><code>data1</code></strong>, les colonnes de <strong><code>data2</code></strong>, en conservant toutes les lignes de <strong><code>data1</code></strong> et toutes les lignes de <strong><code>data2</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a>data1 <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href=""></a>  <span class="fu">full_join</span>(data2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id"</span> <span class="ot">=</span> <span class="st">"ident"</span>)) <span class="ot">-&gt;</span> data_fulljoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a>data_fulljoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
     id sexe    age localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;      NA
3     3 H        88 Cestas/33    122     3000
4     4 F        32 Bordeaux/33  063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;      NA
6     6 &lt;NA&gt;     NA Dax/40       088     1850</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li><p>Toutes les observations sont conservées, à la fois celles de <strong><code>data1</code></strong> mais aussi celles de <strong><code>data2</code></strong><br>
</p></li>
<li><p>Il y a donc des valeurs manquantes dans</p>
<ul>
<li>les colonnes de <strong><code>data1</code></strong> pour les observations de <strong><code>data2</code></strong> qui n’existent pas dans <strong><code>data1</code></strong></li>
<li>les colonnes de <strong><code>data2</code></strong> pour les observations de <strong><code>data1</code></strong> qui n’existent pas dans <strong><code>data2</code></strong></li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-24" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="ajouter-une-colonne-didentifiants-avec-rownames_to_column">Ajouter une colonne d’identifiants avec <code>rownames_to_column()</code></h3>
<p>Pour les cas où il n’y a pas d’identifiant dans le jeu de données ou que l’identifiant n’est pas dans une colonne mais dans <em>rownames</em>, on utilise la fonction <code>rownames_to_column()</code> qui va ajouter les noms de lignes dans une colonne, qui contiendra ainsi un identifiant unique pour chaque observation</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href=""></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"identifiant"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 23
   identifiant    id   age an.naissance sexe  nivetud   poids occup qualif freres.soeurs clso  relig
   &lt;chr&gt;       &lt;int&gt; &lt;int&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt;
 1 1               1    28         1975 Femme Enseign…  2634. Exer… Emplo…             8 Oui   Ni c…
 2 2               2    23         1980 Femme &lt;NA&gt;      9738. Etud… &lt;NA&gt;               2 Oui   Ni c…
 3 3               3    59         1944 Homme Dernier…  3994. Exer… Techn…             2 Non   Ni c…
 4 4               4    34         1969 Homme Enseign…  5732. Exer… Techn…             1 Non   Appa…
 5 5               5    71         1932 Femme Dernier…  4329. Retr… Emplo…             0 Oui   Prat…
 6 6               6    35         1968 Femme Enseign…  8675. Exer… Emplo…             5 Non   Ni c…
 7 7               7    60         1943 Femme Dernier…  6166. Au f… Ouvri…             1 Oui   Appa…
 8 8               8    47         1956 Homme Enseign… 12892. Exer… Ouvri…             5 Non   Ni c…
 9 9               9    20         1983 Femme &lt;NA&gt;      7809. Etud… &lt;NA&gt;               4 Oui   Appa…
10 10             10    28         1975 Homme Enseign…  2277. Exer… Autre              2 Non   Prat…
# ℹ 1,990 more rows
# ℹ 11 more variables: trav.imp &lt;fct&gt;, trav.satisf &lt;fct&gt;, hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;,
#   peche.chasse &lt;fct&gt;, cuisine &lt;fct&gt;, bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;,
#   cl_age &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="section-25" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="calculer-des-statistiques-récapitulatives">Calculer des statistiques récapitulatives</h3>
<h4 id="avec-la-fonction-count">avec la fonction <code>count()</code></h4>
<p>Compte le nombre d’occurrences des modalités de(s) variable(s) spécifiée(s) = tableau de fréquences qui contient uniquement les effectifs<br>
Peut être utile en amont d’un <code>geom_bar()</code></p>
<div class="columns">
<div class="column" style="width:42%;">
<h5 id="pour-une-variable">Pour une variable</h5>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite compter le nombre d’occurrences pour la variable ‘clso’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href=""></a>  <span class="fu">count</span>(clso)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  clso            n
  &lt;chr&gt;       &lt;int&gt;
1 Ne sait pas    27
2 Non          1037
3 Oui           936</code></pre>
</div>
</div>
</div><div class="column" style="width:3%;">

</div><div class="column" style="width:55%;">
<h5 id="pour-plusieurs-variables">Pour plusieurs variables</h5>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite à présent compter le nombre d’occurrences pour les variables ‘sexe’ et ‘clso’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href=""></a>  <span class="fu">count</span>(sexe, clso)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  sexe  clso            n
  &lt;chr&gt; &lt;chr&gt;       &lt;int&gt;
1 Femme Ne sait pas    19
2 Femme Non           592
3 Femme Oui           490
4 Homme Ne sait pas     8
5 Homme Non           445
6 Homme Oui           446</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-26" class="slide level2 unlisted unnumbered">
<h2></h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Par défaut, les modalités sont affichés selon l’ordre alphanumérique pour les variables de type “character” ou l’ordre déterminé lors de leur création pour les facteurs. Pour afficher les données par ordre décroissant des fréquences, on ajoute <code>sort = TRUE</code> dans la fonction <code>count()</code> (fonctionne avec une ou plusieurs variables)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href=""></a>  <span class="fu">count</span>(clso, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  clso            n
  &lt;chr&gt;       &lt;int&gt;
1 Non          1037
2 Oui           936
3 Ne sait pas    27</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-27" class="slide level2 unlisted unnumbered">
<h2></h2>
<h4 id="avec-la-fonction-summarise">avec la fonction <code>summarise()</code></h4>
<div class="columns">
<div class="column" style="width:45%;">
<h5 id="pour-une-variable-1">Pour une variable</h5>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite calculer différentes statistiques pour connaître la distribution de la variable ‘age’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">moyenne_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb93-3"><a href=""></a>            <span class="at">ecarttype_age =</span> <span class="fu">sd</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb93-4"><a href=""></a>            <span class="at">minimum_age =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb93-5"><a href=""></a>            <span class="at">mediane_age =</span> <span class="fu">median</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb93-6"><a href=""></a>            <span class="at">maximum_age =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  moyenne_age ecarttype_age minimum_age mediane_age maximum_age
        &lt;dbl&gt;         &lt;dbl&gt;       &lt;int&gt;       &lt;dbl&gt;       &lt;int&gt;
1        48.2          16.9          18          48          97</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:50%;">
<h5 id="pour-plusieurs-variables-simultanément">Pour plusieurs variables simultanément</h5>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite calculer différentes statistiques pour connaître la distribution de toutes les variables numériques du jeu de données (sauf ‘id’ et ‘an.naissance’)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(id, an.naissance)) <span class="sc">|&gt;</span> </span>
<span id="cb95-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),</span>
<span id="cb95-4"><a href=""></a>                   <span class="fu">list</span>(<span class="at">moyenne =</span> mean,</span>
<span id="cb95-5"><a href=""></a>                        <span class="at">ecarttype =</span> sd,</span>
<span id="cb95-6"><a href=""></a>                        <span class="at">mediane =</span> median)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  age_moyenne age_ecarttype age_mediane poids_moyenne poids_ecarttype poids_mediane
        &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;
1        48.2          16.9          48         5536.           4375.         4631.
# ℹ 6 more variables: freres.soeurs_moyenne &lt;dbl&gt;, freres.soeurs_ecarttype &lt;dbl&gt;,
#   freres.soeurs_mediane &lt;dbl&gt;, heures.tv_moyenne &lt;dbl&gt;, heures.tv_ecarttype &lt;dbl&gt;,
#   heures.tv_mediane &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Avec <code>summarise(across())</code>, les noms des nouvelles variables sont créés en concaténant les noms des variables initiales et les noms des fonctions indiqués dans <code>list()</code>, séparés par un <code>_</code></p>
</div>
</div>
</div>
</div></div>
</section>
<section id="section-28" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="effectuer-des-opérations-groupées-avec-la-fonction-group_by">Effectuer des opérations groupées avec la fonction <code>group_by()</code></h3>
<p><strong>La fonction <code>group_by()</code> permet de définir des groupes pour effectuer des fonctions par groupe plutôt que sur l’ensemble des données</strong></p>
<ul>
<li>On peut utiliser une ou plusieurs variables pour regrouper les données<br>
</li>
<li>Cette fonction est souvent utilisée avec d’autres fonctions comme <code>mutate()</code>, <code>filter()</code> ou <code>summarise()</code></li>
</ul>
<div class="columns">
<div class="column" style="width:45%;">
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite calculer l’âge moyen, minimum et maximum des personnes qui écoutent ou non du hard rock</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href=""></a>  <span class="fu">group_by</span>(hard.rock) <span class="sc">|&gt;</span> </span>
<span id="cb97-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">moyenne_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb97-4"><a href=""></a>            <span class="at">minimum_age =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb97-5"><a href=""></a>            <span class="at">maximum_age =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  hard.rock moyenne_age minimum_age maximum_age
  &lt;fct&gt;           &lt;dbl&gt;       &lt;int&gt;       &lt;int&gt;
1 Non              48.3          18          97
2 Oui              27.6          19          44</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:50%;">
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite faire des groupes selon l’écoute de hard rock et la pratique de la pêche-chasse, pour calculer l’âge moyen, minimum et maximum de chacun des groupes constitués</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb99-2"><a href=""></a>  <span class="fu">group_by</span>(hard.rock, peche.chasse) <span class="sc">|&gt;</span></span>
<span id="cb99-3"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">moyenne_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb99-4"><a href=""></a>            <span class="at">minimum_age =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb99-5"><a href=""></a>            <span class="at">maximum_age =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
# Groups:   hard.rock [2]
  hard.rock peche.chasse moyenne_age minimum_age maximum_age
  &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;       &lt;int&gt;       &lt;int&gt;
1 Non       Non                 48.4          18          97
2 Non       Oui                 47.4          18          78
3 Oui       Non                 26.5          19          43
4 Oui       Oui                 31.7          25          44</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-29" class="slide level2 unlisted unnumbered">
<h2></h2>
<ul>
<li>On peut cumuler <code>group_by()</code> sur plusieurs variables avec <code>summarise()</code> de plusieurs variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb101-2"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(id, an.naissance)) <span class="sc">|&gt;</span> </span>
<span id="cb101-3"><a href=""></a>  <span class="fu">group_by</span>(hard.rock, peche.chasse) <span class="sc">|&gt;</span> </span>
<span id="cb101-4"><a href=""></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),</span>
<span id="cb101-5"><a href=""></a>                   <span class="fu">list</span>(<span class="at">moyenne =</span> mean,</span>
<span id="cb101-6"><a href=""></a>                        <span class="at">ecarttype =</span> sd)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 10
# Groups:   hard.rock [2]
  hard.rock peche.chasse age_moyenne age_ecarttype poids_moyenne poids_ecarttype
  &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;
1 Non       Non                 48.4         17.1          5464.           4317.
2 Non       Oui                 47.4         15.3          6057.           4806.
3 Oui       Non                 26.5          7.23         6663.           4520.
4 Oui       Oui                 31.7         10.7          5323.           2350.
# ℹ 4 more variables: freres.soeurs_moyenne &lt;dbl&gt;, freres.soeurs_ecarttype &lt;dbl&gt;,
#   heures.tv_moyenne &lt;dbl&gt;, heures.tv_ecarttype &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Pour annuler la structuration en groupes, on utilise la fonction <code>ungroup()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb103-2"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(id, an.naissance)) <span class="sc">|&gt;</span> </span>
<span id="cb103-3"><a href=""></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb103-4"><a href=""></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric),</span>
<span id="cb103-5"><a href=""></a>                   <span class="fu">list</span>(<span class="at">moyenne =</span> mean,</span>
<span id="cb103-6"><a href=""></a>                        <span class="at">ecarttype =</span> sd)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  age_moyenne age_ecarttype poids_moyenne poids_ecarttype freres.soeurs_moyenne
        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;                 &lt;dbl&gt;
1        48.2          16.9         5536.           4375.                  3.28
# ℹ 3 more variables: freres.soeurs_ecarttype &lt;dbl&gt;, heures.tv_moyenne &lt;dbl&gt;,
#   heures.tv_ecarttype &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-30" class="slide level2 unlisted unnumbered">
<h2></h2>
<div class="callout callout-warning callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p><code>group_by()</code> fonctionne pour tous les verbes vus précédemment, sauf <code>arrange()</code>, qui trie la table sans tenir compte des groupes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb105-2"><a href=""></a>  <span class="fu">group_by</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb105-3"><a href=""></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 22
# Groups:   sexe [2]
      id   age an.naissance sexe  nivetud      poids occup qualif freres.soeurs clso  relig trav.imp
   &lt;int&gt; &lt;int&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;fct&gt;        &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;   
 1  1916    97         1906 Femme Derniere a…  2163. Autr… Autre              5 Non   Prat… &lt;NA&gt;    
 2   270    96         1907 Femme Derniere a…  9993. Retr… &lt;NA&gt;               1 Oui   Ni c… &lt;NA&gt;    
 3  1542    93         1910 Femme Derniere a…  7108. Reti… &lt;NA&gt;               7 Non   Prat… &lt;NA&gt;    
 4   235    92         1911 Homme N'a jamais…   827. Retr… Ouvri…             0 Ne s… Prat… &lt;NA&gt;    
 5  1151    91         1912 Homme Derniere a…  4291. Reti… &lt;NA&gt;               3 Oui   Appa… &lt;NA&gt;    
 6    96    90         1913 Femme Derniere a…  5875. Au f… Emplo…             7 Non   Prat… &lt;NA&gt;    
 7  1122    90         1913 Femme 1er cycle   14812. Retr… Emplo…             3 Oui   Prat… &lt;NA&gt;    
 8  1767    90         1913 Femme Derniere a… 12266. Reti… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;    
 9   759    89         1914 Femme Derniere a…  9555. Au f… &lt;NA&gt;               1 Non   Prat… &lt;NA&gt;    
10   971    89         1914 Homme Derniere a…  2374. Retr… Ouvri…             5 Oui   Prat… &lt;NA&gt;    
# ℹ 1,990 more rows
# ℹ 10 more variables: trav.satisf &lt;fct&gt;, hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;,
#   cuisine &lt;fct&gt;, bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;, cl_age &lt;chr&gt;</code></pre>
</div>
</div>
<p>Pour que le tri soit pris en compte avec la fonction <code>arrange()</code>, il faut ajouter <code>.by_group = TRUE</code> dans cette dernière</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span></span>
<span id="cb107-2"><a href=""></a>  <span class="fu">group_by</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb107-3"><a href=""></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(age), <span class="at">.by_group =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,000 × 22
# Groups:   sexe [2]
      id   age an.naissance sexe  nivetud      poids occup qualif freres.soeurs clso  relig trav.imp
   &lt;int&gt; &lt;int&gt;        &lt;dbl&gt; &lt;chr&gt; &lt;fct&gt;        &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;          &lt;int&gt; &lt;chr&gt; &lt;fct&gt; &lt;fct&gt;   
 1  1916    97         1906 Femme Derniere a…  2163. Autr… Autre              5 Non   Prat… &lt;NA&gt;    
 2   270    96         1907 Femme Derniere a…  9993. Retr… &lt;NA&gt;               1 Oui   Ni c… &lt;NA&gt;    
 3  1542    93         1910 Femme Derniere a…  7108. Reti… &lt;NA&gt;               7 Non   Prat… &lt;NA&gt;    
 4    96    90         1913 Femme Derniere a…  5875. Au f… Emplo…             7 Non   Prat… &lt;NA&gt;    
 5  1122    90         1913 Femme 1er cycle   14812. Retr… Emplo…             3 Oui   Prat… &lt;NA&gt;    
 6  1767    90         1913 Femme Derniere a… 12266. Reti… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;    
 7   759    89         1914 Femme Derniere a…  9555. Au f… &lt;NA&gt;               1 Non   Prat… &lt;NA&gt;    
 8  1117    89         1914 Femme A arrete s…  5677. Au f… Ouvri…             5 Oui   Appa… &lt;NA&gt;    
 9  1127    89         1914 Femme A arrete s… 25986. Autr… &lt;NA&gt;               2 Non   Appa… &lt;NA&gt;    
10  1516    88         1915 Femme Derniere a… 15686. Reti… &lt;NA&gt;               2 Non   Prat… &lt;NA&gt;    
# ℹ 1,990 more rows
# ℹ 10 more variables: trav.satisf &lt;fct&gt;, hard.rock &lt;fct&gt;, lecture.bd &lt;fct&gt;, peche.chasse &lt;fct&gt;,
#   cuisine &lt;fct&gt;, bricol &lt;fct&gt;, cinema &lt;fct&gt;, sport &lt;fct&gt;, heures.tv &lt;dbl&gt;, cl_age &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-31" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="fiche-aide-mémoire-dplyr">Fiche aide-mémoire <code>{dplyr}</code></h3>
<p>Toutes les fonctions du package <code>{dplyr}</code> sont disponibles dans la [<a href="https://rstudio.github.io/cheatsheets/html/data-transformation.html" target="&quot;_blank">cheatsheet</a>] du package</p>
<iframe src="https://rstudio.github.io/cheatsheets/data-transformation.pdf" width="100%" height="600px">
</iframe>
</section>
<section id="manipulations-avec-le-package-tidyr" class="slide level2">
<h2>Manipulations avec le package <a href="https://tidyr.tidyverse.org/" target="_blank"><code>{tidyr}</code></a></h2>
<p><strong>Les fonctions utiles pour</strong></p>
<ul>
<li><p><strong>réorganiser les données</strong></p>
<ul>
<li><code>pivot_longer()</code> : transformer des colonnes en lignes</li>
<li><code>pivot_wider()</code> : transformer des lignes en colonnes</li>
</ul></li>
<li><p><strong>manipuler les colonnes</strong></p>
<ul>
<li><code>separate()</code> : séparer une colonne en plusieurs colonnes</li>
<li><code>unite()</code> : regrouper plusieurs colonnes en une seule</li>
</ul></li>
<li><p><strong>gérer les données manquantes</strong></p>
<ul>
<li><code>drop_na()</code> : supprimer les lignes contenant des valeurs manquantes</li>
<li><code>replace_na()</code> : remplacer les valeurs manquantes par des valeurs spécifiées</li>
</ul></li>
</ul>
</section>
<section id="section-32" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="transformer-des-colonnes-en-lignes-avec-pivot_longer">Transformer des colonnes en lignes avec <code>pivot_longer()</code></h3>
<p>Cette fonction convertit plusieurs colonnes en deux nouvelles colonnes : une pour les noms des variables, une pour leurs valeurs correspondantes<br>
<span class="math inline">\(\Rightarrow\)</span> réduit le nombre de colonnes mais augmente celui des lignes, rendant ainsi le jeu de données plus “long”</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On transforme les colonnes des différentes activités (hard.rock, lecture.bd, peche.chasse, cuisine, bricol) en un format long</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb109-2"><a href=""></a>  <span class="fu">select</span>(sexe, hard.rock, lecture.bd, peche.chasse, cuisine, bricol) <span class="sc">|&gt;</span> </span>
<span id="cb109-3"><a href=""></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(hard.rock, lecture.bd, peche.chasse, cuisine, bricol),</span>
<span id="cb109-4"><a href=""></a>               <span class="at">names_to =</span> <span class="st">"activite"</span>,</span>
<span id="cb109-5"><a href=""></a>               <span class="at">values_to =</span> <span class="st">"pratique"</span>) <span class="ot">-&gt;</span> hdvlong</span>
<span id="cb109-6"><a href=""></a>hdvlong</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,000 × 3
   sexe  activite     pratique
   &lt;chr&gt; &lt;chr&gt;        &lt;fct&gt;   
 1 Femme hard.rock    Non     
 2 Femme lecture.bd   Non     
 3 Femme peche.chasse Non     
 4 Femme cuisine      Oui     
 5 Femme bricol       Non     
 6 Femme hard.rock    Non     
 7 Femme lecture.bd   Non     
 8 Femme peche.chasse Non     
 9 Femme cuisine      Non     
10 Femme bricol       Non     
# ℹ 9,990 more rows</code></pre>
</div>
</div>
<p><strong>Elle est particulièrement utile pour restructurer les données pour certaines analyses statistiques et représentations graphiques qui nécessitent un format long</strong></p>
</section>
<section id="section-33" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="transformer-des-lignes-en-colonnes-avec-pivot_wider">Transformer des lignes en colonnes avec <code>pivot_wider()</code></h3>
<p>Cette fonction sert à transformer des données du format long au format large (“wide”)</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut créer un tableau croisé montrant le nombre de personnes pratiquant chaque activité pour chaque modalité de la variable ‘sexe’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href=""></a>hdvlong <span class="sc">|&gt;</span> </span>
<span id="cb111-2"><a href=""></a>  <span class="fu">filter</span>(pratique <span class="sc">==</span> <span class="st">"Oui"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb111-3"><a href=""></a>    <span class="fu">group_by</span>(sexe, activite) <span class="sc">|&gt;</span> </span>
<span id="cb111-4"><a href=""></a>    <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb111-5"><a href=""></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> activite,</span>
<span id="cb111-6"><a href=""></a>                <span class="at">values_from =</span> count,</span>
<span id="cb111-7"><a href=""></a>                <span class="at">values_fill =</span> <span class="dv">0</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 6
# Groups:   sexe [2]
  sexe  bricol cuisine hard.rock lecture.bd peche.chasse
  &lt;chr&gt;  &lt;int&gt;   &lt;int&gt;     &lt;int&gt;      &lt;int&gt;        &lt;int&gt;
1 Femme    338     611         7         32           52
2 Homme    515     270         7         15          172</code></pre>
</div>
</div>
<p><strong>Cette fonction est utile pour créer des tableaux croisés permettant de visualiser et comparer des catégories</strong></p>
</section>
<section id="section-34" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="séparer-une-colonne-en-plusieurs-colonnes-avec-separate">Séparer une colonne en plusieurs colonnes avec <code>separate()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; Dans le jeu de données <strong><code>data_fulljoin</code></strong> créé précédemment, on va séparer les valeurs contenues dans la variable ‘localisation’ en 2 variables, l’une que l’on nommera ‘ville’, l’autre ‘departement’</span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href=""></a><span class="co"># Jeu de données data_fulljoin</span></span>
<span id="cb113-2"><a href=""></a>data_fulljoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
     id sexe    age localisation code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;      NA
3     3 H        88 Cestas/33    122     3000
4     4 F        32 Bordeaux/33  063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;      NA
6     6 &lt;NA&gt;     NA Dax/40       088     1850</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href=""></a><span class="co"># Séparation des valeurs de la variable localisation</span></span>
<span id="cb115-2"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb115-3"><a href=""></a>  <span class="fu">separate</span>(<span class="at">col =</span> localisation,</span>
<span id="cb115-4"><a href=""></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"ville"</span>, <span class="st">"departement"</span>),</span>
<span id="cb115-5"><a href=""></a>           <span class="at">sep =</span> <span class="st">"/"</span>, </span>
<span id="cb115-6"><a href=""></a>           <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="ot">-&gt;</span> data_fulljoin</span>
<span id="cb115-7"><a href=""></a>data_fulljoin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
     id sexe    age localisation ville    departement code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  Bordeaux 33          063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;      NA
3     3 H        88 Cestas/33    Cestas   33          122     3000
4     4 F        32 Bordeaux/33  Bordeaux 33          063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;      NA
6     6 &lt;NA&gt;     NA Dax/40       Dax      40          088     1850</code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Pour supprimer la variable d’origine dans le jeu de données, il faut indiquer <code>remove = TRUE</code></p>
</div>
</div>
</div>
</section>
<section id="section-35" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="regrouper-plusieurs-colonnes-en-une-seule-avec-unite">Regrouper plusieurs colonnes en une seule avec <code>unite()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; Dans <strong><code>data_fulljoin</code></strong>, on va regrouper les valeurs de “departement” et “code” pour reconstituer le code insee de la commune</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb117-2"><a href=""></a>  <span class="fu">unite</span>(<span class="st">"code_insee"</span>, departement<span class="sc">:</span>code, <span class="at">sep=</span> <span class="st">""</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
     id sexe    age localisation ville    code_insee departement code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  Bordeaux 33063      33          063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;     NANA       &lt;NA&gt;        &lt;NA&gt;      NA
3     3 H        88 Cestas/33    Cestas   33122      33          122     3000
4     4 F        32 Bordeaux/33  Bordeaux 33063      33          063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;     NANA       &lt;NA&gt;        &lt;NA&gt;      NA
6     6 &lt;NA&gt;     NA Dax/40       Dax      40088      40          088     1850</code></pre>
</div>
</div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Pour supprimer les variables d’origine dans le jeu de données, il faut indiquer <code>remove = TRUE</code></p>
</div>
</div>
</div>
</section>
<section id="section-36" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="supprimer-les-lignes-contenant-des-valeurs-manquantes-avec-drop_na">Supprimer les lignes contenant des valeurs manquantes avec <code>drop_na()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On supprime les valeurs manquantes du jeu de données <strong><code>data_fulljoin</code></strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb119-2"><a href=""></a>  <span class="fu">drop_na</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 8
     id sexe    age localisation ville    departement code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  Bordeaux 33          063     2500
2     3 H        88 Cestas/33    Cestas   33          122     3000
3     4 F        32 Bordeaux/33  Bordeaux 33          063     3700</code></pre>
</div>
</div>
<p>Il est possible de supprimer les valeurs manquantes pour une variable en particulier, en précisant son nom dans <code>drop_na()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb121-2"><a href=""></a>  <span class="fu">drop_na</span>(age)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
     id sexe    age localisation ville    departement code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  Bordeaux 33          063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;      NA
3     3 H        88 Cestas/33    Cestas   33          122     3000
4     4 F        32 Bordeaux/33  Bordeaux 33          063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;      NA</code></pre>
</div>
</div>
</section>
<section id="section-37" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="remplacer-les-valeurs-manquantes-par-des-valeurs-spécifiées-avec-replace_na">Remplacer les valeurs manquantes par des valeurs spécifiées avec <code>replace_na()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb123-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">revenu =</span> <span class="fu">replace_na</span>(revenu, <span class="sc">-</span><span class="dv">999</span>)) </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
     id sexe    age localisation ville    departement code  revenu
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1     1 F        25 Bordeaux/33  Bordeaux 33          063     2500
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;    -999
3     3 H        88 Cestas/33    Cestas   33          122     3000
4     4 F        32 Bordeaux/33  Bordeaux 33          063     3700
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;    -999
6     6 &lt;NA&gt;     NA Dax/40       Dax      40          088     1850</code></pre>
</div>
</div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Il faut compléter avec une valeur du même type. Ici, pour revenu, il faut une valeur numérique. Si l’on souhaite ajouter du texte dans une variable numérique, il faut modifier le type de la variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href=""></a>data_fulljoin <span class="sc">|&gt;</span> </span>
<span id="cb125-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">revenu =</span> <span class="fu">replace_na</span>(<span class="fu">as.character</span>(revenu), <span class="st">"Refus de répondre"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
     id sexe    age localisation ville    departement code  revenu           
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
1     1 F        25 Bordeaux/33  Bordeaux 33          063   2500             
2     2 H        57 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;  Refus de répondre
3     3 H        88 Cestas/33    Cestas   33          122   3000             
4     4 F        32 Bordeaux/33  Bordeaux 33          063   3700             
5     5 F        44 &lt;NA&gt;         &lt;NA&gt;     &lt;NA&gt;        &lt;NA&gt;  Refus de répondre
6     6 &lt;NA&gt;     NA Dax/40       Dax      40          088   1850             </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-38" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="fiche-aide-mémoire-tidyr">Fiche aide-mémoire <code>{tidyr}</code></h3>
<p>Toutes les fonctions du package <code>{tidyr}</code> sont disponibles dans la [<a href="https://rstudio.github.io/cheatsheets/html/tidyr.html" target="&quot;_blank">cheatsheet</a>] du package</p>
<iframe src="https://rstudio.github.io/cheatsheets/tidyr.pdf" width="100%" height="600px">
</iframe>
</section>
<section id="manipulations-des-chaînes-de-caractères-avec-le-package-stringr" class="slide level2">
<h2>Manipulations des chaînes de caractères avec le package <a href="https://stringr.tidyverse.org/" target="_blank"><code>{stringr}</code></a></h2>
<p><strong>Les fonctions utiles pour</strong></p>
<ul>
<li><p><strong>la recherche et correspondance d’expression</strong></p>
<ul>
<li><code>str_detect()</code> : détecter la présence d’une expression (<em>pattern</em>) dans une chaîne de caractères</li>
<li><code>str_starts()</code> : détecter la présence d’une expression au début d’une chîane de caractères</li>
</ul></li>
<li><p><strong>la transformation de chaînes</strong></p>
<ul>
<li><code>str_replace()</code> : remplacer une expression dans une chaîne de caractères spécifiée</li>
<li><code>str_to_upper()</code> : convertir une chaîne en majuscules</li>
<li><code>str_to_lower()</code> : convertir une chaîne en minuscules</li>
<li><code>str_to_title()</code> : convertir une chaîne en ne mettant que la 1re lettre des mots en majuscules</li>
</ul></li>
</ul>
</section>
<section id="section-39" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="détection-dune-expression-avec-la-fonction-str_detect">Détection d’une expression avec la fonction <code>str_detect()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite sélectionner les lignes qui contiennent l’expression “qualifie” dans la variable ‘qualif’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb127-2"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(qualif, <span class="st">"qualifie"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb127-3"><a href=""></a><span class="co"># pour la vérification, on affiche seulement la variable qualif</span></span>
<span id="cb127-4"><a href=""></a>  <span class="fu">select</span>(qualif)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 292 × 1
   qualif          
   &lt;fct&gt;           
 1 Ouvrier qualifie
 2 Ouvrier qualifie
 3 Ouvrier qualifie
 4 Ouvrier qualifie
 5 Ouvrier qualifie
 6 Ouvrier qualifie
 7 Ouvrier qualifie
 8 Ouvrier qualifie
 9 Ouvrier qualifie
10 Ouvrier qualifie
# ℹ 282 more rows</code></pre>
</div>
</div>
</section>
<section id="section-40" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="détection-dune-expression-avec-la-fonction-str_starts">Détection d’une expression avec la fonction <code>str_starts()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite sélectionner les lignes qui commencent par l’expression “Ouvrier” dans la variable ‘qualif’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb129-2"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">str_starts</span>(qualif, <span class="st">"Ouvrier"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb129-3"><a href=""></a><span class="co"># pour la vérification, on affiche seulement la variable qualif</span></span>
<span id="cb129-4"><a href=""></a>  <span class="fu">select</span>(qualif)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 495 × 1
   qualif            
   &lt;fct&gt;             
 1 Ouvrier qualifie  
 2 Ouvrier qualifie  
 3 Ouvrier qualifie  
 4 Ouvrier specialise
 5 Ouvrier qualifie  
 6 Ouvrier specialise
 7 Ouvrier qualifie  
 8 Ouvrier specialise
 9 Ouvrier qualifie  
10 Ouvrier qualifie  
# ℹ 485 more rows</code></pre>
</div>
</div>
</section>
<section id="section-41" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="remplacement-dune-expression-avec-la-fonction-str_replace">Remplacement d’une expression avec la fonction <code>str_replace()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite remplacer l’expression “Ouvrier” par “Ouv.” dans la variable ‘qualif’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb131-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">qualif =</span> <span class="fu">str_replace</span>(qualif, <span class="st">"Ouvrier"</span>, <span class="st">"Ouv."</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href=""></a><span class="co"># Variable après modification</span></span>
<span id="cb132-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb132-3"><a href=""></a>  <span class="fu">select</span>(qualif) <span class="sc">|&gt;</span> </span>
<span id="cb132-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           n    % val%
Autre                     58  2.9  3.5
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Ouv. qualifie            292 14.6 17.7
Ouv. specialise          203 10.2 12.3
Profession intermediaire 160  8.0  9.7
Technicien                86  4.3  5.2
NA                       347 17.3   NA</code></pre>
</div>
</div>
</section>
<section id="section-42" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="conversion-du-texte-en-majuscules-avec-la-fonction-str_to_upper">Conversion du texte en majuscules avec la fonction <code>str_to_upper()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite convertir les modalités de la variable ‘hard.rock’ en majuscules</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb134-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">hard.rock =</span> <span class="fu">str_to_upper</span>(hard.rock)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href=""></a><span class="co"># Variable initiale</span></span>
<span id="cb135-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb135-3"><a href=""></a>  <span class="fu">select</span>(hard.rock) <span class="sc">|&gt;</span> </span>
<span id="cb135-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       n    % val%
Non 1986 99.3 99.3
Oui   14  0.7  0.7</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href=""></a><span class="co"># Variable après modification</span></span>
<span id="cb137-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb137-3"><a href=""></a>  <span class="fu">select</span>(hard.rock) <span class="sc">|&gt;</span> </span>
<span id="cb137-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       n    % val%
NON 1986 99.3 99.3
OUI   14  0.7  0.7</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-43" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="conversion-du-texte-en-minuscules-avec-la-fonction-str_to_lower">Conversion du texte en minuscules avec la fonction <code>str_to_lower()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite convertir les modalités de la variable ‘hard.rock’ en minuscules</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb139-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">hard.rock =</span> <span class="fu">str_to_lower</span>(hard.rock)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href=""></a><span class="co"># Variable initiale</span></span>
<span id="cb140-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb140-3"><a href=""></a>  <span class="fu">select</span>(hard.rock) <span class="sc">|&gt;</span> </span>
<span id="cb140-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       n    % val%
NON 1986 99.3 99.3
OUI   14  0.7  0.7</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href=""></a><span class="co"># Variable après modification</span></span>
<span id="cb142-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb142-3"><a href=""></a>  <span class="fu">select</span>(hard.rock) <span class="sc">|&gt;</span> </span>
<span id="cb142-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       n    % val%
non 1986 99.3 99.3
oui   14  0.7  0.7</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-44" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="conversion-du-texte-en-minuscules-avec-la-fonction-str_to_title">Conversion du texte en minuscules avec la fonction <code>str_to_title()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite convertir le texte de la variable ‘qualif’ avec la première lettre des mots en majuscules</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb144-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">qualif =</span> <span class="fu">str_to_title</span>(qualif)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href=""></a><span class="co"># Variable initiale</span></span>
<span id="cb145-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb145-3"><a href=""></a>  <span class="fu">select</span>(qualif) <span class="sc">|&gt;</span> </span>
<span id="cb145-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           n    % val%
Autre                     58  2.9  3.5
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Ouv. qualifie            292 14.6 17.7
Ouv. specialise          203 10.2 12.3
Profession intermediaire 160  8.0  9.7
Technicien                86  4.3  5.2
NA                       347 17.3   NA</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href=""></a><span class="co"># Variable après modification</span></span>
<span id="cb147-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb147-3"><a href=""></a>  <span class="fu">select</span>(qualif) <span class="sc">|&gt;</span> </span>
<span id="cb147-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           n    % val%
Autre                     58  2.9  3.5
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Ouv. Qualifie            292 14.6 17.7
Ouv. Specialise          203 10.2 12.3
Profession Intermediaire 160  8.0  9.7
Technicien                86  4.3  5.2
NA                       347 17.3   NA</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-45" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="fiche-aide-mémoire-stringr">Fiche aide-mémoire <code>{stringr}</code></h3>
<p>Toutes les fonctions du package <code>{stringr}</code> sont disponibles dans la [<a href="https://rstudio.github.io/cheatsheets/html/strings.html" target="&quot;_blank">cheatsheet</a>] du package</p>
<iframe src="https://rstudio.github.io/cheatsheets/strings.pdf" width="100%" height="600px">
</iframe>
</section>
<section id="manipulation-des-facteurs-avec-le-package-forcats" class="slide level2">
<h2>Manipulation des facteurs avec le package <a href="https://forcats.tidyverse.org/index.html" target="_blank"><code>{forcats}</code></a></h2>
<p><strong>Les fonctions utiles pour</strong></p>
<div class="columns">
<div class="column">
<ul>
<li><p><strong>changer l’ordre des modalités (niveaux)</strong></p>
<ul>
<li><code>fct_infreq()</code>: réorganiser les niveaux du plus fréquent au moins fréquent</li>
<li><code>fct_relevel()</code> : réorganiser les niveaux d’un facteur selon un ordre spécifique défini par l’utilisateur</li>
<li><code>fct_reorder()</code> : réorganiser les niveaux d’un facteur selon les valeurs d’une autre variable (numérique)</li>
<li><code>fct_rev()</code> : inverser l’ordre des niveaux d’un facteur</li>
</ul></li>
<li><p><strong>modifier les valeurs des modalités</strong></p>
<ul>
<li><code>fct_recode()</code> : changer le niveau d’un facteur</li>
<li><code>fct_relabel()</code> : renommer les niveaux d’un facteur en appliquant une fonction à chaque niveau</li>
<li><code>fct_collapse()</code> : regrouper les niveaux d’un facteur</li>
<li><code>fct_lump()</code> : regrouper les niveaux peu fréquents d’un facteur en un nouveau niveau appelé “autre”</li>
<li><code>fct_anon()</code> : anonymiser les niveaux</li>
</ul></li>
</ul>
</div><div class="column">
<ul>
<li><p><strong>ajouter ou supprimer des modalités</strong></p>
<ul>
<li><code>fct_expand()</code> : ajouter des niveaux supplémentaires à un facteur</li>
<li><code>fct_drop()</code> : supprimer les niveaux inutilisés d’un facteur</li>
</ul></li>
<li><p><strong>faire des opérations sur les facteurs</strong></p>
<ul>
<li><code>fct_unique()</code> : lister les niveaux d’un facteur</li>
<li><code>fct_count()</code> : compter le nombre d’observation pour chacun des niveaux d’un facteur</li>
<li><code>fct_cross()</code> : combiner les niveaux de plusieurs facteurs</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="section-46" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="réorganiser-les-niveaux-dun-facteur-selon-leur-importance-avec-fct_infreq">Réorganiser les niveaux d’un facteur selon leur importance avec <code>fct_infreq()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite réorganiser les niveaux de ‘occup’ selon leur importance </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb149-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">occup =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(occup)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb150-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb150-3"><a href=""></a>  <span class="fu">pull</span>(occup) <span class="sc">|&gt;</span> </span>
<span id="cb150-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         n    % val%
Exerce une profession 1049 52.4 52.4
Chomeur                134  6.7  6.7
Etudiant, eleve         94  4.7  4.7
Retraite               392 19.6 19.6
Retire des affaires     77  3.9  3.9
Au foyer               171  8.6  8.6
Autre inactif           83  4.2  4.2</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb152-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb152-3"><a href=""></a>  <span class="fu">pull</span>(occup) <span class="sc">|&gt;</span> </span>
<span id="cb152-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         n    % val%
Exerce une profession 1049 52.4 52.4
Retraite               392 19.6 19.6
Au foyer               171  8.6  8.6
Chomeur                134  6.7  6.7
Etudiant, eleve         94  4.7  4.7
Autre inactif           83  4.2  4.2
Retire des affaires     77  3.9  3.9</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-47" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="réorganiser-les-niveaux-des-facteurs-manuellement-avec-fct_relevel">Réorganiser les niveaux des facteurs manuellement avec <code>fct_relevel()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut avoir les niveaux de la variable ‘trav.satisf’ dans l’ordre suivant : “Insatisfaction”, “Equilibre” et “Satisfaction”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb154-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">trav.satisf =</span> <span class="fu">fct_relevel</span>(trav.satisf,</span>
<span id="cb154-3"><a href=""></a>                                   <span class="fu">c</span>(<span class="st">"Insatisfaction"</span>, <span class="st">"Equilibre"</span>, <span class="st">"Satisfaction"</span>))) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:35%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb155-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb155-3"><a href=""></a>  <span class="fu">pull</span>(trav.satisf) <span class="sc">|&gt;</span> </span>
<span id="cb155-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Satisfaction"   "Insatisfaction" "Equilibre"     </code></pre>
</div>
</div>
</div><div class="column" style="width:65%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb157-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb157-3"><a href=""></a>  <span class="fu">pull</span>(trav.satisf) <span class="sc">|&gt;</span> </span>
<span id="cb157-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Insatisfaction" "Equilibre"      "Satisfaction"  </code></pre>
</div>
</div>
</div></div>
<div title="Pour rappel">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Pour rappel</strong></p>
</div>
<div class="callout-content">
<p>Par défaut, les modalités d’une variable qualitative sont triées par ordre alphanumérique</p>
</div>
</div>
</div>
</div>
</section>
<section id="section-48" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="réorganiser-les-niveaux-en-fonction-des-valeurs-dune-variable-numérique-avec-fct_reorder">Réorganiser les niveaux en fonction des valeurs d’une variable numérique avec <code>fct_reorder()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On réorganise les niveaux de ‘relig’ selon l’age moyen de chacune des modalités</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb159-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_reorder</span>(relig, age, <span class="at">.fun =</span> median, <span class="at">.desc =</span> <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb159-3"><a href=""></a>  <span class="fu">group_by</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb159-4"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">age_median =</span> <span class="fu">median</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href=""></a><span class="co"># Ordre initial</span></span>
<span id="cb160-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb160-3"><a href=""></a>  <span class="fu">group_by</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb160-4"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">age_median =</span> <span class="fu">median</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  relig                       age_median
  &lt;fct&gt;                            &lt;dbl&gt;
1 Pratiquant regulier               55  
2 Pratiquant occasionnel            51  
3 Appartenance sans pratique        48  
4 Ni croyance ni appartenance       39  
5 Rejet                             43  
6 NSP ou NVPR                       48.5</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href=""></a><span class="co"># Ordre après modification</span></span>
<span id="cb162-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb162-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_reorder</span>(relig, age, <span class="at">.fun =</span> median, <span class="at">.desc =</span> <span class="cn">FALSE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb162-4"><a href=""></a>  <span class="fu">group_by</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb162-5"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">age_median =</span> <span class="fu">median</span>(age))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  relig                       age_median
  &lt;fct&gt;                            &lt;dbl&gt;
1 Ni croyance ni appartenance       39  
2 Rejet                             43  
3 Appartenance sans pratique        48  
4 NSP ou NVPR                       48.5
5 Pratiquant occasionnel            51  
6 Pratiquant regulier               55  </code></pre>
</div>
</div>
</div></div>
<div class="callout callout-note callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>Le paramètre <code>.fun</code> définit la fonction d’agrégation. Elle peut être <code>mean</code>, <code>median</code>, <code>sd</code>, etc.</li>
<li>Pour ordonner les valeurs par ordre décroissant, il faut définir le paramètre <code>.desc = TRUE</code></li>
</ul>
<p><strong>Cette fonction est particulièrement utile pour adapter l’ordre des modalités dans les visualisations graphiques ou pour comparer des groupes selon une variable quantitative</strong></p>
</div>
</div>
</div>
</section>
<section id="section-49" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="inverser-lordre-des-niveaux-avec-fct_rev">Inverser l’ordre des niveaux avec <code>fct_rev()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; Dans la variable ‘lecture.bd’, on veut que les niveaux soient dans l’ordre suivant : “Oui” et “Non”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb164-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">lecture.bd =</span> <span class="fu">fct_rev</span>(lecture.bd)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb165-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb165-3"><a href=""></a>  <span class="fu">pull</span>(lecture.bd) <span class="sc">|&gt;</span> </span>
<span id="cb165-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Non" "Oui"</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb167-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb167-3"><a href=""></a>  <span class="fu">pull</span>(lecture.bd) <span class="sc">|&gt;</span> </span>
<span id="cb167-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Oui" "Non"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-50" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="changer-le-niveau-dun-facteur-avec-fct_recode">Changer le niveau d’un facteur avec <code>fct_recode()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On modifie le niveau “2eme cycle” de ‘nivetud’ en “2e cycle”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb169-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">nivetud =</span> forcats<span class="sc">::</span><span class="fu">fct_recode</span>(nivetud, <span class="st">"2e cycle"</span> <span class="ot">=</span> <span class="st">"2eme cycle"</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb170-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb170-3"><a href=""></a>  <span class="fu">pull</span>(nivetud) <span class="sc">|&gt;</span> </span>
<span id="cb170-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "N'a jamais fait d'etudes"                                       
[2] "A arrete ses etudes, avant la derniere annee d'etudes primaires"
[3] "Derniere annee d'etudes primaires"                              
[4] "1er cycle"                                                      
[5] "2eme cycle"                                                     
[6] "Enseignement technique ou professionnel court"                  
[7] "Enseignement technique ou professionnel long"                   
[8] "Enseignement superieur y compris technique superieur"           </code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb172-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span>  </span>
<span id="cb172-3"><a href=""></a>  <span class="fu">pull</span>(nivetud) <span class="sc">|&gt;</span> </span>
<span id="cb172-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "N'a jamais fait d'etudes"                                       
[2] "A arrete ses etudes, avant la derniere annee d'etudes primaires"
[3] "Derniere annee d'etudes primaires"                              
[4] "1er cycle"                                                      
[5] "2e cycle"                                                       
[6] "Enseignement technique ou professionnel court"                  
[7] "Enseignement technique ou professionnel long"                   
[8] "Enseignement superieur y compris technique superieur"           </code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-51" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="modifier-le-nom-des-niveaux-de-manière-globale-avec-fct_relabel">Modifier le nom des niveaux de manière globale avec <code>fct_relabel()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On passe les niveaux de la variable ‘cuisine’ en majuscules</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb174-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">cuisine =</span> forcats<span class="sc">::</span><span class="fu">fct_relabel</span>(cuisine, toupper)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb175-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb175-3"><a href=""></a>  <span class="fu">pull</span>(cuisine) <span class="sc">|&gt;</span> </span>
<span id="cb175-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Non" "Oui"</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb177-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb177-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">cuisine =</span> forcats<span class="sc">::</span><span class="fu">fct_relabel</span>(cuisine, toupper)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb178-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb178-3"><a href=""></a>  <span class="fu">pull</span>(cuisine) <span class="sc">|&gt;</span> </span>
<span id="cb178-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "NON" "OUI"</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-52" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="regrouper-les-niveaux-dun-facteur-en-catégories-manuellement-définies-avec-fct_collapse">Regrouper les niveaux d’un facteur en catégories manuellement définies avec <code>fct_collapse()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; Dans la variable ‘relig’, on veut regrouper les niveaux “Pratiquant regulier” et “Pratiquant occasionnel” dans la modalité “Pratiquant”</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb180-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_collapse</span>(relig, </span>
<span id="cb180-3"><a href=""></a>                               <span class="st">"Pratiquant"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Pratiquant regulier"</span>, <span class="st">"Pratiquant occasionnel"</span>))) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb181-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb181-3"><a href=""></a>  <span class="fu">pull</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb181-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pratiquant regulier"         "Pratiquant occasionnel"      "Appartenance sans pratique" 
[4] "Ni croyance ni appartenance" "Rejet"                       "NSP ou NVPR"                </code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb183-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb183-3"><a href=""></a>  <span class="fu">pull</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb183-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pratiquant"                  "Appartenance sans pratique"  "Ni croyance ni appartenance"
[4] "Rejet"                       "NSP ou NVPR"                </code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-53" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="conserver-les-niveaux-les-plus-communs-et-grouper-les-autres-avec-fct_lump">Conserver le(s) niveau(x) le(s) plus commun(s) et grouper les autres avec <code>fct_lump()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut conserver le niveau le plus courant de la variable ‘occup’ et regrouper les autres niveaux dans un même niveau</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb185-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">occup =</span> <span class="fu">fct_lump</span>(occup, <span class="at">n =</span> <span class="dv">1</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb186-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb186-3"><a href=""></a>  <span class="fu">pull</span>(occup) <span class="sc">|&gt;</span> </span>
<span id="cb186-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         n    % val%
Exerce une profession 1049 52.4 52.4
Retraite               392 19.6 19.6
Au foyer               171  8.6  8.6
Chomeur                134  6.7  6.7
Etudiant, eleve         94  4.7  4.7
Autre inactif           83  4.2  4.2
Retire des affaires     77  3.9  3.9</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb188-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb188-3"><a href=""></a>  <span class="fu">pull</span>(occup) <span class="sc">|&gt;</span> </span>
<span id="cb188-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         n    % val%
Exerce une profession 1049 52.4 52.4
Other                  951 47.5 47.5</code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>On peut nommer le niveau <code>other_level</code> (ex : <code>other_level = "Autre"</code>).<br>
</li>
<li>Avec <code>n</code> négatif, la fonction conserve les <code>n</code> niveaux les moins courants.</li>
<li>On peut donner une fréquence d’apparition, en changeant <code>n</code> par <code>prop</code> (ex : <code>prop = 0.2</code> conserve les niveaux qui représentent au moins 20% du vecteur).</li>
<li>Avec un <code>prop</code> négatif, on définit une marge maximale d’apparition.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-54" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="anonymiser-les-niveaux-avec-fct_anon">Anonymiser les niveaux avec <code>fct_anon()</code></h3>
<p>Cette fonction est utile pour transformer le texte en codes numériques<br>
NB1 : la variable anonymisée est toujours un facteur<br>
NB2 : ni les valeurs ni l’ordre des niveaux ne sont conservés, les identifiants numériques sont arbitraires</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On remplace les niveaux de la variable ‘bricol’ par des identifiants numériques aléatoires</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb190-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">bricol_anon =</span> <span class="fu">fct_anon</span>(bricol)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb191-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb191-3"><a href=""></a>  <span class="fu">pull</span>(bricol) <span class="sc">|&gt;</span> </span>
<span id="cb191-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Non" "Oui"</code></pre>
</div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb193-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb193-3"><a href=""></a>  <span class="fu">pull</span>(bricol_anon) <span class="sc">|&gt;</span> </span>
<span id="cb193-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1" "2"</code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Si on le souhaite, il est possible d’ajouter un préfixe aux nouveaux labels</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb195-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">bricol_anon =</span> <span class="fu">fct_anon</span>(bricol, <span class="at">prefix =</span> <span class="st">"bricol_"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb195-3"><a href=""></a>  <span class="fu">pull</span>(bricol_anon) <span class="sc">|&gt;</span> </span>
<span id="cb195-4"><a href=""></a>  <span class="fu">levels</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bricol_1" "bricol_2"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-55" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="ajouter-de-nouveaux-niveaux-à-un-facteur-avec-fct_expand">Ajouter de nouveaux niveaux à un facteur avec <code>fct_expand()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut ajouter les niveaux “Ne se reconnaît pas dans ces catégories” et “Refus de répondre” dans la variable ‘sexe’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb197-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">sexe =</span> <span class="fu">fct_expand</span>(sexe, </span>
<span id="cb197-3"><a href=""></a>                           <span class="st">"Ne se reconnaît pas dans ces catégories"</span>, <span class="st">"Refus de répondre"</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb198-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb198-3"><a href=""></a>  <span class="fu">pull</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb198-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         n  % val%
Femme 1101 55   55
Homme  899 45   45</code></pre>
</div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb200-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb200-3"><a href=""></a>  <span class="fu">pull</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb200-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                           n  % val%
Femme                                   1101 55   55
Homme                                    899 45   45
Ne se reconnaît pas dans ces catégories    0  0    0
Refus de répondre                          0  0    0</code></pre>
</div>
</div>
</div></div>
</section>
<section id="section-56" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="supprimer-les-niveaux-de-facteurs-inutilisés-avec-fct_drop">Supprimer les niveaux de facteurs inutilisés avec <code>fct_drop()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut supprimer les niveaux inutilisés, pour lesquels on n’a pas d’observations, dans la variable ‘sexe’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb202-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">sexe =</span> <span class="fu">fct_drop</span>(sexe)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href=""></a><span class="co"># Modalités initiales</span></span>
<span id="cb203-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb203-3"><a href=""></a>  <span class="fu">pull</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb203-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                           n  % val%
Femme                                   1101 55   55
Homme                                    899 45   45
Ne se reconnaît pas dans ces catégories    0  0    0
Refus de répondre                          0  0    0</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href=""></a><span class="co"># Modalités après modification</span></span>
<span id="cb205-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb205-3"><a href=""></a>  <span class="fu">pull</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb205-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         n  % val%
Femme 1101 55   55
Homme  899 45   45</code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<p>Avec <code>fct_drop(only = "...")</code>, on peut préciser les niveaux que l’on souhaite supprimer</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb207-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">sexe =</span> <span class="fu">fct_drop</span>(sexe, <span class="at">only =</span> <span class="st">"Refus de répondre"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb207-3"><a href=""></a>  <span class="fu">pull</span>(sexe) <span class="sc">|&gt;</span> </span>
<span id="cb207-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                           n  % val%
Femme                                   1101 55   55
Homme                                    899 45   45
Ne se reconnaît pas dans ces catégories    0  0    0</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-57" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="lister-les-niveaux-dun-facteur-fct_unique">Lister les niveaux d’un facteur <code>fct_unique()</code></h3>
<p>Cette fonction permet de vérifier l’ordre des modalités d’une variable facteur, ce qui peut s’avérer utile avant analyse, notamment pour les graphiques</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut connaître les niveaux de la variable ‘occup’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb209-2"><a href=""></a>  <span class="fu">pull</span>(occup) <span class="sc">|&gt;</span> </span>
<span id="cb209-3"><a href=""></a>  <span class="fu">fct_unique</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Exerce une profession Other                
Levels: Exerce une profession Other</code></pre>
</div>
</div>
</section>
<section id="section-58" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="compter-la-fréquence-des-niveaux-dun-facteur-fct_count">Compter la fréquence des niveaux d’un facteur <code>fct_count()</code></h3>
<p>Cette fonction donne le tableau de fréquence des niveaux du facteur avec le nombre d’occurences pour chacun d’eux</p>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On souhaite compter le nombre d’occurrences pour la variable ‘relig’</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb211-2"><a href=""></a>  <span class="fu">pull</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb211-3"><a href=""></a>  <span class="fu">fct_count</span>(<span class="at">sort =</span> <span class="cn">FALSE</span>, <span class="at">prop =</span> <span class="cn">FALSE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  f                               n
  &lt;fct&gt;                       &lt;int&gt;
1 Pratiquant                    708
2 Appartenance sans pratique    760
3 Ni croyance ni appartenance   399
4 Rejet                          93
5 NSP ou NVPR                    40</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Il est possible de trier les niveaux par ordre décroissant des fréquences avec le paramètre <code>sort = TRUE</code>. Avec le paramètre <code>prop = TRUE</code>, il est possible d’ajouter une colonne avec les</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb213-2"><a href=""></a>  <span class="fu">pull</span>(relig) <span class="sc">|&gt;</span> </span>
<span id="cb213-3"><a href=""></a>  <span class="fu">fct_count</span>(<span class="at">sort =</span> <span class="cn">TRUE</span>, <span class="at">prop =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  f                               n      p
  &lt;fct&gt;                       &lt;int&gt;  &lt;dbl&gt;
1 Appartenance sans pratique    760 0.38  
2 Pratiquant                    708 0.354 
3 Ni croyance ni appartenance   399 0.200 
4 Rejet                          93 0.0465
5 NSP ou NVPR                    40 0.02  </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-59" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="combiner-les-niveaux-de-plusieurs-facteursfct_cross">Combiner les niveaux de plusieurs facteurs<code>fct_cross()</code></h3>
<p><span style="color:#AC44C5; font-size:0.8em"> &gt;&gt; On veut créer une variable qui combine les niveaux des variables ‘cinema’ et ‘lecture.bd’ </span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb215-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">cinebd =</span> <span class="fu">fct_cross</span>(cinema, lecture.bd, <span class="at">sep =</span> <span class="st">":"</span>)) <span class="ot">-&gt;</span> hdv2003</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color:#C5449D; font-size:0.7em"> &gt;&gt;&gt; Vérification </span></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href=""></a><span class="co"># Variables initiales - "Tableau croisé"</span></span>
<span id="cb216-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb216-3"><a href=""></a>  <span class="fu">count</span>(cinema, lecture.bd)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  cinema lecture.bd     n
  &lt;fct&gt;  &lt;fct&gt;      &lt;int&gt;
1 Non    Oui           18
2 Non    Non         1156
3 Oui    Oui           29
4 Oui    Non          797</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href=""></a><span class="co"># Variable croisée</span></span>
<span id="cb218-2"><a href=""></a>hdv2003 <span class="sc">|&gt;</span> </span>
<span id="cb218-3"><a href=""></a>  <span class="fu">pull</span>(cinebd) <span class="sc">|&gt;</span> </span>
<span id="cb218-4"><a href=""></a>  questionr<span class="sc">::</span><span class="fu">freq</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           n    % val%
Non:Oui   18  0.9  0.9
Oui:Oui   29  1.5  1.5
Non:Non 1156 57.8 57.8
Oui:Non  797 39.9 39.9</code></pre>
</div>
</div>
</div></div>
<div class="callout callout-tip callout-style-simple">
<div class="callout-body">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-content">
<ul>
<li>On peut conserver les combinaisons qui n’ont aucune observation, en ajoutant le paramètre <code>keep_empty = TRUE</code> dans la fonction <code>fct_cross()</code></li>
<li>On peut paramétrer le séparateur entre les niveaux (ex. : <code>_</code>, <code>.</code>, etc.)<br>
</li>
<li>Il est possible de croiser plus de deux facteurs</li>
</ul>
</div>
</div>
</div>
</section>
<section id="section-60" class="slide level2 unlisted unnumbered">
<h2></h2>
<h3 id="fiche-aide-mémoire-forcats">Fiche aide-mémoire <code>{forcats}</code></h3>
<p>Toutes les fonctions du package <code>{forcats}</code> sont disponibles dans la [<a href="https://rstudio.github.io/cheatsheets/html/factors.html" target="&quot;_blank">cheatsheet</a>] du package</p>
<iframe src="https://rstudio.github.io/cheatsheets/factors.pdf" width="100%" height="600px">
</iframe>
</section></section>
<section>
<section id="ressources-et-références-bibliographiques" class="title-slide slide level1 inverse center" data-background-color="black">
<h1>Ressources et références bibliographiques</h1>

</section>
<section id="aides-et-ressources-en-ligne" class="slide level2 unnumbered">
<h2>Aides et ressources en ligne</h2>
<p><svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#A626A4;overflow:visible;position:relative;"><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"></path></svg> La page <a href="https://github.com/statire/bulledr" target="_blank">Bulle d’R</a><br>
<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#A626A4;overflow:visible;position:relative;"><path d="M64 464H96v48H64c-35.3 0-64-28.7-64-64V64C0 28.7 28.7 0 64 0H229.5c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3V288H336V160H256c-17.7 0-32-14.3-32-32V48H64c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16zM176 352h32c30.9 0 56 25.1 56 56s-25.1 56-56 56H192v32c0 8.8-7.2 16-16 16s-16-7.2-16-16V448 368c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24H192v48h16zm96-80h32c26.5 0 48 21.5 48 48v64c0 26.5-21.5 48-48 48H304c-8.8 0-16-7.2-16-16V368c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H320v96h16zm80-112c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v32h32c8.8 0 16 7.2 16 16s-7.2 16-16 16H448v48c0 8.8-7.2 16-16 16s-16-7.2-16-16V432 368z"></path></svg> La cheatsheet <a href="https://github.com/statire/bulledr/blob/main/CheatSheet_bulledr_ETTIS.pdf" target="_blank">Bonnes pratiques en R à ETTIS</a><br>
<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#A626A4;overflow:visible;position:relative;"><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"></path></svg> Pour le package <a href="https://thinkr.fr/forcats-forcats-vous-avez-dit-forcats/" target="_blank">forcats</a></p>
</section>
<section id="packages" class="slide level2 smaller scrollable">
<h2>Packages</h2>
<!-- 1. METTRE TOUT LE PARAMÉTRAGE PDF DE L'EN-TÊTE EN COMMENTAIRE  -->
<!-- 2. RENDER html+revealjs -->
<!-- quarto render E:/GitRepo/bulledr/03-manipulations_tidyverse/index.qmd --to all -->
<!-- 3. REACTIVER L'OUTPUT PDF ET AJOUTER \pagebreak AVANT LA 1RE SLIDE -->
<!-- 4. RENDER pdf -->
<!-- quarto render E:/GitRepo/bulledr/03-manipulations_tidyverse/index.qmd --to pdf -->
<!-- 5. RENDER html -->
<!-- 6. REMETTRE TOUT LE PARAMÉTRAGE PDF DE L'EN-TÊTE EN COMMENTAIRE  -->
<!-- 7. RENDER revealjs -->
<div class="quarto-auto-generated-content">
<p><img src="img/bloc-etat.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Bulle d’R | Manipulation de données</p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Bache2022magrittr" class="csl-entry" role="listitem">
Bache, S. M., et H. Wickham. 2022. <em>magrittr: A Forward-Pipe Operator for R</em>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.
</div>
<div id="ref-Firke2024janitor" class="csl-entry" role="listitem">
Firke, S. 2024. <em>janitor: Simple Tools for Examining and Cleaning Dirty Data</em>. <a href="https://sfirke.github.io/janitor/index.html">https://sfirke.github.io/janitor/index.html</a>.
</div>
<div id="ref-Kaplan2025fastDummies" class="csl-entry" role="listitem">
Kaplan, J. 2025. <em>fastDummies: Fast Creation of Dummy (Binary) Columns and Rows fromCategorical Variables</em>. <a href="https://jacobkap.github.io/fastDummies/">https://jacobkap.github.io/fastDummies/</a>.
</div>
<div id="ref-Wickham2023forcats" class="csl-entry" role="listitem">
Wickham, H. 2023a. <em>forcats: Tools for Working with Categorical Variables (Factors)</em>. <a href="https://forcats.tidyverse.org/">https://forcats.tidyverse.org/</a>.
</div>
<div id="ref-Wickham2023stringr" class="csl-entry" role="listitem">
———. 2023b. <em>stringr: Simple, Consistent Wrappers for Common String Operations</em>. <a href="https://stringr.tidyverse.org">https://stringr.tidyverse.org</a>.
</div>
<div id="ref-Wickham2023dplyr" class="csl-entry" role="listitem">
Wickham, H., R. François, L. Henry, K. Müller, et D. Vaughan. 2023. <em>dplyr: A Grammar of Data Manipulation</em>. <a href="https://dplyr.tidyverse.org">https://dplyr.tidyverse.org</a>.
</div>
<div id="ref-Wickham2024tidyr" class="csl-entry" role="listitem">
Wickham, H., D. Vaughan, et M. Girlich. 2024. <em>tidyr: Tidy Messy Data</em>. <a href="https://tidyr.tidyverse.org">https://tidyr.tidyverse.org</a>.
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-pointer/pointer.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":false,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"hideMissingTitles":true,"width":"normal"},
'pointer': {"key":"q","color":"red","pointerSize":16,"alwaysVisible":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: '100%',

        height: '100%',

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.2,

        maxScale: 2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealPointer, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    

    <script type="text/javascript" charset="utf-8">

      $(document).ready(function() {

        // Add `data-footer` on title slide

        function addCustomFooter() {

          let titleSlide = $("section#title-slide");

          let titleSlideFooter = titleSlide.attr('data-footer');

          let footer = $('div.footer p');

          let globalFooterText = footer.html();

    

          if (titleSlide.hasClass('present')) {

            footer.html(titleSlideFooter);

          }

    

          Reveal.on('slidechanged', function(event) {

            if (event.currentSlide.matches('#title-slide')) {

              footer.html(titleSlideFooter);

            } else {

              footer.html(globalFooterText);

            }

          });

        }

    

        addCustomFooter();

    

        // Hide slide number on title slide

        function removeSlideNumber() {

          let slideNo = $('div.slide-number');

          slideNo.addClass('hide');

    

          Reveal.on('slidechanged', function(event) {

            if (Reveal.isFirstSlide()) {

              slideNo.addClass('hide');

            } else {

              slideNo.removeClass('hide');

            }

          });

        }

    

        removeSlideNumber();

      });

    </script>

    

    <style>

      .hide {

        display: none !important;

      }

    </style>

    

    <script>

      let placeholder = document.querySelector("div#toc");

      let toc = document.querySelector("#toc-nav");

      let toc_slide = document.querySelector("section#TOC");

      

      let toc_clone = toc.cloneNode(true);

      placeholder.replaceWith(toc_clone);

      

      toc_slide.remove();

    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copié");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copié");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    <script>var lightboxQuarto = GLightbox({"openEffect":"zoom","closeEffect":"zoom","descPosition":"bottom","selector":".lightbox","loop":false});
    (function() {
      let previousOnload = window.onload;
      window.onload = () => {
        if (previousOnload) {
          previousOnload();
        }
        lightboxQuarto.on('slide_before_load', (data) => {
          const { slideIndex, slideNode, slideConfig, player, trigger } = data;
          const href = trigger.getAttribute('href');
          if (href !== null) {
            const imgEl = window.document.querySelector(`a[href="${href}"] img`);
            if (imgEl !== null) {
              const srcAttr = imgEl.getAttribute("src");
              if (srcAttr && srcAttr.startsWith("data:")) {
                slideConfig.href = srcAttr;
              }
            }
          } 
        });
      
        lightboxQuarto.on('slide_after_load', (data) => {
          const { slideIndex, slideNode, slideConfig, player, trigger } = data;
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(slideNode);
          }
        });
      
      };
      
    })();
              </script>
    

</body></html>